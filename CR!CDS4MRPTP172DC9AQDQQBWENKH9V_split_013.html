<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Java&amp;#8482;: A Beginner&amp;#8217;s Guide Sixth Edition</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<div id="filepos547570" class="calibre29"><span><img alt="image" src="images/00003.jpg" class="calibre30"/></span></div><div class="calibre11"> </div>
<div class="calibre31"><span class="calibre2"><span><big class="calibre3"><big class="calibre4"><big class="calibre5"><big class="calibre6"><big class="calibre32"><big class="calibre4">Chapter 6</big></big></big></big></big></big></span></span></div>
<div class="calibre9"><span class="calibre2"><span>A Closer Look at Methods and Classes</span></span></div><div class="calibre33"> </div>
<div class="calibre1"><span class="calibre10"><span><span class="bold1">Key Skills &amp; Concepts</span></span></span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Control access to members</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Pass objects to a method</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Return objects from a method</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Overload methods</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Overload constructors</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Use recursion</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Apply <span class="bold1">static</span></span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Use inner classes</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Use varargs</span></div>
<div class="calibre1"><span><img alt="image" src="images/00004.jpg" class="calibre34"/></span></div><div class="calibre18"> </div>
<div class="calibre12"><span><span><span class="calibre2"><span class="bold1">T</span></span></span>his chapter resumes our examination of classes and methods. It begins by explaining how to control access to the members of a class. It then discusses the passing and returning of objects, method overloading, recursion, and the use of the keyword <span class="bold1">static</span>. Also described are nested classes and variable-length arguments.</span></div>
<div id="filepos550365" class="calibre1"><span class="calibre10"><span><span class="bold1">Controlling Access to Class Members</span></span></span></div>
<div class="calibre12"><span>In its support for encapsulation, the class provides two major benefits. First, it links data with the code that manipulates it. You have been taking advantage of this aspect of the class since <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_011.html#filepos384353">Chapter 4</a>. Second, it provides the means by which access to members can be controlled. It is this feature that is examined here.</span></div>
<div class="calibre23"><span>Although Java’s approach is a bit more sophisticated, in essence, there are two basic types of class members: public and private. A public member can be freely accessed by code defined outside of its class. This is the type of class member that we have been using up to this point. A private member can be accessed only by other methods defined by its class. It is through the use of private members that access is controlled.</span></div>
<div class="calibre23"><span>Restricting access to a class’ members is a fundamental part of object-oriented programming because it helps prevent the misuse of an object. By allowing access to private data only through a well-defined set of methods, you can prevent improper values from being assigned to that data—by performing a range check, for example. It is not possible for code outside the class to set the value of a private member directly. You can also control precisely how and when the data within an object is used. Thus, when correctly implemented, a class creates a “black box” that can be used, but the inner workings of which are not open to tampering.</span></div>
<div class="calibre23"><span>Up to this point, you haven’t had to worry about access control because Java provides a default access setting in which, for the types of programs shown earlier, the members of a class are freely available to the other code in the program. (Thus, for the preceding examples, the default access setting is essentially public.) Although convenient for simple classes (and example programs in books such as this one), this default setting is inadequate for many real-world situations. Here you will see how to use Java’s other access control features.</span></div>
<div id="filepos552800" class="calibre1"><span class="calibre10"><span><span class="bold1">Java’s Access Modifiers</span></span></span></div>
<div class="calibre12"><span>Member access control is achieved through the use of three <span class="italic">access modifiers</span>: <span class="bold1">public</span>, <span class="bold1">private</span>, and <span class="bold1">protected</span>. As explained, if no access modifier is used, the default access setting is assumed. In this chapter, we will be concerned with <span class="bold1">public</span> and <span class="bold1">private</span>. The <span class="bold1">protected</span> modifier applies only when inheritance is involved and is described in <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_015.html#filepos693174">Chapter 8</a>.</span></div>
<div class="calibre23"><span>When a member of a class is modified by the <span class="bold1">public</span> specifier, that member can be accessed by any other code in your program. This includes methods defined inside other classes.</span></div>
<div class="calibre23"><span>When a member of a class is specified as <span class="bold1">private</span>, that member can be accessed only by other members of its class. Thus, methods in other classes cannot access a <span class="bold1">private</span> member of another class.</span></div>
<div class="calibre23"><span>The default access setting (in which no access modifier is used) is the same as <span class="bold1">public</span> unless your program is broken down into packages. A <span class="italic">package</span> is, essentially, a grouping of classes. Packages are both an organizational and an access control feature, but a discussion of packages must wait until <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_015.html#filepos693174">Chapter 8</a>. For the types of programs shown in this and the preceding chapters, <span class="bold1">public</span> access is the same as default access.</span></div>
<div class="calibre23"><span>An access modifier precedes the rest of a member’s type specification. That is, it must begin a member’s declaration statement. Here are some examples:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00392.jpg" class="calibre415"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>To understand the effects of <span class="bold1">public</span> and <span class="bold1">private</span>, consider the following program:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00393.jpg" class="calibre416"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>As you can see, inside the <span class="bold1">MyClass</span> class, <span class="bold1">alpha</span> is specified as <span class="bold1">private</span>, <span class="bold1">beta</span> is explicitly specified as <span class="bold1">public</span>, and <span class="bold1">gamma</span> uses the default access, which for this example is the same as specifying <span class="bold1">public</span>. Because <span class="bold1">alpha</span> is private, it cannot be accessed by code outside of its class. Therefore, inside the <span class="bold1">AccessDemo</span> class, <span class="bold1">alpha</span> cannot be used directly. It must be accessed through its public accessor methods: <span class="bold1">setAlpha( )</span> and <span class="bold1">getAlpha( )</span>. If you were to remove the comment symbol from the beginning of the following line,</span></div>
<div class="calibre1"><span><img alt="image" src="images/00394.jpg" class="calibre158"/></span></div><div class="calibre11"> </div>
<div class="calibre27"><span>you would not be able to compile this program because of the access violation. Although access to <span class="bold1">alpha</span> by code outside of <span class="bold1">MyClass</span> is not allowed, methods defined within <span class="bold1">MyClass</span> can freely access it, as the <span class="bold1">setAlpha( )</span> and <span class="bold1">getAlpha( )</span> methods show.</span></div>
<div class="calibre23"><span>The key point is this: A private member can be used freely by other members of its class, but it cannot be accessed by code outside its class.</span></div>
<div class="calibre23"><span>To see how access control can be applied to a more practical example, consider the following program that implements a “fail-soft” <span class="bold1">int</span> array, in which boundary errors are prevented, thus avoiding a run-time exception from being generated. This is accomplished by encapsulating the array as a private member of a class, allowing access to the array only through member methods. With this approach, any attempt to access the array beyond its boundaries can be prevented, with such an attempt failing gracefully (resulting in a “soft” landing rather than a “crash”). The fail-soft array is implemented by the <span class="bold1">FailSoftArray</span> class, shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00395.jpg" class="calibre417"/></span></div><div class="calibre11"> </div>
<div class="calibre1"><span><img alt="image" src="images/00396.jpg" class="calibre418"/></span></div><div class="calibre11"> </div>
<div class="calibre1"><span><img alt="image" src="images/00397.jpg" class="calibre419"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The output from the program is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00398.jpg" class="calibre420"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>Let’s look closely at this example. Inside <span class="bold1">FailSoftArray</span> are defined three <span class="bold1">private</span> members. The first is <span class="bold1">a</span>, which stores a reference to the array that will actually hold information. The second is <span class="bold1">errval</span>, which is the value that will be returned when a call to <span class="bold1">get( )</span> fails. The third is the <span class="bold1">private</span> method <span class="bold1">indexOK( )</span>, which determines whether an index is within bounds. Thus, these three members can be used only by other members of the <span class="bold1">FailSoftArray</span> class. Specifically, <span class="bold1">a</span> and <span class="bold1">errval</span> can be used only by other methods in the class, and <span class="bold1">indexOK( )</span> can be called only by other members of <span class="bold1">FailSoftArray</span>. The rest of the class members are <span class="bold1">public</span> and can be called by any other code in a program that uses <span class="bold1">FailSoftArray</span>.</span></div>
<div class="calibre23"><span>When a <span class="bold1">FailSoftArray</span> object is constructed, you must specify the size of the array and the value that you want to return if a call to <span class="bold1">get( )</span> fails. The error value must be a value that would otherwise not be stored in the array. Once constructed, the actual array referred to by <span class="bold1">a</span> and the error value stored in <span class="bold1">errval</span> cannot be accessed by users of the <span class="bold1">FailSoftArray</span> object. Thus, they are not open to misuse. For example, the user cannot try to index <span class="bold1">a</span> directly, possibly exceeding its bounds. Access is available only through the <span class="bold1">get( )</span> and <span class="bold1">put( )</span> methods.</span></div>
<div class="calibre23"><span>The <span class="bold1">indexOK( )</span> method is <span class="bold1">private</span> mostly for the sake of illustration. It would be harmless to make it <span class="bold1">public</span> because it does not modify the object. However, since it is used internally by the <span class="bold1">FailSoftArray</span> class, it can be <span class="bold1">private</span>.</span></div>
<div class="calibre23"><span>Notice that the <span class="bold1">length</span> instance variable is <span class="bold1">public</span>. This is in keeping with the way Java implements arrays. To obtain the length of a <span class="bold1">FailSoftArray</span>, simply use its <span class="bold1">length</span> member.</span></div>
<div class="calibre23"><span>To use a <span class="bold1">FailSoftArray</span> array, call <span class="bold1">put( )</span> to store a value at the specified index. Call <span class="bold1">get( )</span> to retrieve a value from a specified index. If the index is out-of-bounds, <span class="bold1">put( )</span> returns <span class="bold1">false</span> and <span class="bold1">get( )</span> returns <span class="bold1">errval</span>.</span></div>
<div class="calibre23"><span>For the sake of convenience, the majority of the examples in this book will continue to use default access for most members. Remember, however, that in the real world, restricting access to members—especially instance variables—is an important part of successful object-oriented programming. As you will see in <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_014.html#filepos626773">Chapter 7</a>, access control is even more vital when inheritance is involved.</span></div>
<div class="calibre18"> </div><table cellspacing="0" cellpadding="0" class="calibre37">
<colgroup class="calibre38">
<col class="calibre72"/>
<col class="calibre73"/>
</colgroup>
<tr class="calibre41">
<td valign="top" id="filepos561191" class="calibre74"><span class="calibre10"><span class="bold1">Try This 6-1</span> </span></td>
<td valign="top" class="calibre75"><span class="calibre10">Improving the Queue Class</span></td>
</tr></table><div class="calibre43"> </div>
<div class="calibre1"><span><img alt="image" src="images/00399.jpg" class="calibre421"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>You can use the <span class="bold1">private</span> modifier to make a rather important improvement to the <span class="bold1">Queue</span> class developed in <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_012.html#filepos452160">Chapter 5</a>, <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_012.html#filepos481142">Try This 5-2</a>. In that version, all members of the <span class="bold1">Queue</span> class use the default access, which is essentially public. This means that it would be possible for a program that uses a <span class="bold1">Queue</span> to directly access the underlying array, possibly accessing its elements out of turn. Since the entire point of a queue is to provide a first-in, first-out list, allowing out-of-order access is not desirable. It would also be possible for a malicious programmer to alter the values stored in the <span class="bold1">putloc</span> and <span class="bold1">getloc</span> indices, thus corrupting the queue. Fortunately, these types of problems are easy to prevent by applying the <span class="bold1">private</span> specifier.</span></div>
<div class="calibre19"><span>  <span class="bold1">1.</span>  Copy the original <span class="bold1">Queue</span> class in <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_012.html#filepos481142">Try This 5-2</a> to a new file called <span class="bold1">Queue.java</span>.</span></div>
<div class="calibre47"><span>  <span class="bold1">2.</span>  In the <span class="bold1">Queue</span> class, add the <span class="bold1">private</span> modifier to the <span class="bold1">q</span> array, and the indices <span class="bold1">putloc</span> and <span class="bold1">getloc</span>, as shown here:</span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00400.jpg" class="calibre422"/></span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00401.jpg" class="calibre423"/></span></div>
<div class="calibre47"><span>  <span class="bold1">3.</span>  Changing <span class="bold1">q</span>, <span class="bold1">putloc</span>, and <span class="bold1">getloc</span> from default access to private access has no effect on a program that properly uses <span class="bold1">Queue</span>. For example, it still works fine with the <span class="bold1">QDemo</span> class from <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_012.html#filepos481142">Try This 5-2</a>. However, it prevents the improper use of a <span class="bold1">Queue</span>. For example, the following types of statements are illegal:</span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00402.jpg" class="calibre424"/></span></div>
<div class="calibre47"><span>  <span class="bold1">4.</span>  Now that <span class="bold1">q</span>, <span class="bold1">putloc</span>, and <span class="bold1">getloc</span> are private, the <span class="bold1">Queue</span> class strictly enforces the first-in, first-out attribute of a queue.</span></div>
<div class="calibre36"><span><img alt="image" src="images/00005.jpg" class="calibre34"/></span></div><div class="calibre18"> </div>
<div id="filepos564568" class="calibre9"><span class="calibre10"><span><span class="bold1">Pass Objects to Methods</span></span></span></div>
<div class="calibre12"><span>Up to this point, the examples in this book have been using simple types as parameters to methods. However, it is both correct and common to pass objects to methods. For example, the following program defines a class called <span class="bold1">Block</span> that stores the dimensions of a three-dimensional block:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00403.jpg" class="calibre425"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>This program generates the following output:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00404.jpg" class="calibre426"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The <span class="bold1">sameBlock( )</span> and <span class="bold1">sameVolume( )</span> methods compare the <span class="bold1">Block</span> object passed as a parameter to the invoking object. For <span class="bold1">sameBlock( )</span>, the dimensions of the objects are compared and <span class="bold1">true</span> is returned only if the two blocks are the same. For <span class="bold1">sameVolume( )</span>, the two blocks are compared only to determine whether they have the same volume. In both cases, notice that the parameter <span class="bold1">ob</span> specifies <span class="bold1">Block</span> as its type. Although <span class="bold1">Block</span> is a class type created by the program, it is used in the same way as Java’s built-in types.</span></div>
<div id="filepos566094" class="calibre1"><span class="calibre10"><span><span class="bold1">How Arguments Are Passed</span></span></span></div>
<div class="calibre12"><span>As the preceding example demonstrated, passing an object to a method is a straightforward task. However, there are some nuances of passing an object that are not shown in the example. In certain cases, the effects of passing an object will be different from those experienced when passing non-object arguments. To see why, you need to understand in a general sense the two ways in which an argument can be passed to a subroutine.</span></div>
<div class="calibre23"><span>The first way is <span class="italic">call-by-value</span>. This approach copies the <span class="italic">value</span> of an argument into the formal parameter of the subroutine. Therefore, changes made to the parameter of the subroutine have no effect on the argument in the call. The second way an argument can be passed is <span class="italic">call-by-reference</span>. In this approach, a reference to an argument (not the value of the argument) is passed to the parameter. Inside the subroutine, this reference is used to access the actual argument specified in the call. This means that changes made to the parameter <span class="italic">will</span> affect the argument used to call the subroutine. As you will see, although Java uses call-by-value to pass arguments, the precise effect differs between whether a primitive type or a reference type is passed.</span></div>
<div class="calibre23"><span>When you pass a primitive type, such as <span class="bold1">int</span> or <span class="bold1">double</span>, to a method, it is passed by value. Thus, a copy of the argument is made, and what occurs to the parameter that receives the argument has no effect outside the method. For example, consider the following program:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00405.jpg" class="calibre427"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The output from this program is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00406.jpg" class="calibre428"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>As you can see, the operations that occur inside <span class="bold1">noChange( )</span> have no effect on the values of <span class="bold1">a</span> and <span class="bold1">b</span> used in the call.</span></div>
<div class="calibre23"><span>When you pass an object to a method, the situation changes dramatically, because objects are implicitly passed by reference. Keep in mind that when you create a variable of a class type, you are creating a reference to an object. It is the reference, not the object itself, that is actually passed to the method. As a result, when you pass this reference to a method, the parameter that receives it will refer to the same object as that referred to by the argument. This effectively means that objects are passed to methods by use of call-by-reference. Changes to the object inside the method <span class="italic">do</span> affect the object used as an argument. For example, consider the following program:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00407.jpg" class="calibre429"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>This program generates the following output:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00408.jpg" class="calibre430"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>As you can see, in this case, the actions inside <span class="bold1">change( )</span> have affected the object used as an argument.</span></div>
<div class="calibre35"><span><img alt="image" src="images/00005.jpg" class="calibre34"/></span></div>
<div class="calibre9"><span class="calibre10"><span><span class="bold1">Ask the Expert</span></span></span></div>
<div class="calibre19"><span><span class="bold1"><span><span class="calibre10">Q</span></span>:   Is there any way that I can pass a primitive type by reference?</span></span></div>
<div class="calibre19"><span><span class="bold1"><span><span class="calibre10">A</span></span>:</span>   Not directly. However, Java defines a set of classes that <span class="italic">wrap</span> the primitive types in objects. These are <span class="bold1">Double</span>, <span class="bold1">Float</span>, <span class="bold1">Byte</span>, <span class="bold1">Short</span>, <span class="bold1">Integer</span>, <span class="bold1">Long</span>, and <span class="bold1">Character</span>. In addition to allowing a primitive type to be passed by reference, these wrapper classes define several methods that enable you to manipulate their values. For example, the numeric type wrappers include methods that convert a numeric value from its binary form into its human-readable <span class="bold1">String</span> form, and vice versa.</span></div>
<div class="calibre36"><span><img alt="image" src="images/00005.jpg" class="calibre34"/></span></div><div class="calibre18"> </div>
<div class="calibre23"><span>Remember, when an object reference is passed to a method, the reference itself is passed by use of call-by-value. However, since the value being passed refers to an object, the copy of that value will still refer to the same object referred to by its corresponding argument.</span></div>
<div id="filepos571462" class="calibre1"><span class="calibre10"><span><span class="bold1">Returning Objects</span></span></span></div>
<div class="calibre12"><span>A method can return any type of data, including class types. For example, the class <span class="bold1">ErrorMsg</span> shown here could be used to report errors. Its method, <span class="bold1">getErrorMsg( )</span>, returns a <span class="bold1">String</span> object that contains a description of an error based upon the error code that it is passed.</span></div>
<div class="calibre1"><span><img alt="image" src="images/00409.jpg" class="calibre431"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>Its output is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00410.jpg" class="calibre432"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>You can, of course, also return objects of classes that you create. For example, here is a reworked version of the preceding program that creates two error classes. One is called <span class="bold1">Err</span>, and it encapsulates an error message along with a severity code. The second is called <span class="bold1">ErrorInfo</span>. It defines a method called <span class="bold1">getErrorInfo( )</span>, which returns an <span class="bold1">Err</span> object.</span></div>
<div class="calibre1"><span><img alt="image" src="images/00411.jpg" class="calibre433"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>Here is the output:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00412.jpg" class="calibre434"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>Each time <span class="bold1">getErrorInfo( )</span> is invoked, a new <span class="bold1">Err</span> object is created, and a reference to it is returned to the calling routine. This object is then used within <span class="bold1">main( )</span> to display the error message and severity code.</span></div>
<div class="calibre23"><span>When an object is returned by a method, it remains in existence until there are no more references to it. At that point, it is subject to garbage collection. Thus, an object won’t be destroyed just because the method that created it terminates.</span></div>
<div id="filepos573743" class="calibre1"><span class="calibre10"><span><span class="bold1">Method Overloading</span></span></span></div>
<div class="calibre12"><span>In this section, you will learn about one of Java’s most exciting features: method overloading. In Java, two or more methods within the same class can share the same name, as long as their parameter declarations are different. When this is the case, the methods are said to be <span class="italic">overloaded</span>, and the process is referred to as <span class="italic">method overloading</span>. Method overloading is one of the ways that Java implements polymorphism.</span></div>
<div class="calibre23"><span>In general, to overload a method, simply declare different versions of it. The compiler takes care of the rest. You must observe one important restriction: the type and/or number of the parameters of each overloaded method must differ. It is not sufficient for two methods to differ only in their return types. (Return types do not provide sufficient information in all cases for Java to decide which method to use.) Of course, overloaded methods <span class="italic">may</span> differ in their return types, too. When an overloaded method is called, the version of the method whose parameters match the arguments is executed.</span></div>
<div class="calibre23"><span>Here is a simple example that illustrates method overloading:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00413.jpg" class="calibre435"/></span></div><div class="calibre11"> </div>
<div class="calibre1"><span><img alt="image" src="images/00414.jpg" class="calibre436"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>This program generates the following output:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00415.jpg" class="calibre437"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>As you can see, <span class="bold1">ovlDemo( )</span> is overloaded four times. The first version takes no parameters, the second takes one integer parameter, the third takes two integer parameters, and the fourth takes two <span class="bold1">double</span> parameters. Notice that the first two versions of <span class="bold1">ovlDemo( )</span> return <span class="bold1">void</span>, and the second two return a value. This is perfectly valid, but as explained, overloading is not affected one way or the other by the return type of a method. Thus, attempting to use the following two versions of <span class="bold1">ovlDemo( )</span> will cause an error:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00416.jpg" class="calibre438"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>As the comments suggest, the difference in their return types is insufficient for the purposes of overloading.</span></div>
<div class="calibre23"><span>As you will recall from <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_009.html#filepos231144">Chapter 2</a>, Java provides certain automatic type conversions. These conversions also apply to parameters of overloaded methods. For example, consider the following:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00417.jpg" class="calibre439"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The output from the program is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00418.jpg" class="calibre440"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>In this example, only two versions of <span class="bold1">f( )</span> are defined: one that has an <span class="bold1">int</span> parameter and one that has a <span class="bold1">double</span> parameter. However, it is possible to pass <span class="bold1">f( )</span> a <span class="bold1">byte</span>, <span class="bold1">short</span>, or <span class="bold1">float</span> value. In the case of <span class="bold1">byte</span> and <span class="bold1">short</span>, Java automatically converts them to <span class="bold1">int</span>. Thus, <span class="bold1">f(int)</span> is invoked. In the case of <span class="bold1">float</span>, the value is converted to <span class="bold1">double</span> and <span class="bold1">f(double)</span> is called.</span></div>
<div class="calibre23"><span>It is important to understand, however, that the automatic conversions apply only if there is no direct match between a parameter and an argument. For example, here is the preceding program with the addition of a version of <span class="bold1">f( )</span> that specifies a <span class="bold1">byte</span> parameter:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00419.jpg" class="calibre441"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>Now when the program is run, the following output is produced:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00420.jpg" class="calibre440"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>In this version, since there is a version of <span class="bold1">f( )</span> that takes a <span class="bold1">byte</span> argument, when <span class="bold1">f( )</span> is called with a <span class="bold1">byte</span> argument, <span class="bold1">f(byte)</span> is invoked and the automatic conversion to <span class="bold1">int</span> does not occur.</span></div>
<div class="calibre23"><span>Method overloading supports polymorphism because it is one way that Java implements the “one interface, multiple methods” paradigm. To understand how, consider the following: In languages that do not support method overloading, each method must be given a unique name. However, frequently you will want to implement essentially the same method for different types of data. Consider the absolute value function. In languages that do not support overloading, there are usually three or more versions of this function, each with a slightly different name. For instance, in C, the function <span class="bold1">abs( )</span> returns the absolute value of an integer, <span class="bold1">labs( )</span> returns the absolute value of a long integer, and <span class="bold1">fabs( )</span> returns the absolute value of a floating-point value. Since C does not support overloading, each function has to have its own name, even though all three functions do essentially the same thing. This makes the situation more complex, conceptually, than it actually is. Although the underlying concept of each function is the same, you still have three names to remember. This situation does not occur in Java, because each absolute value method can use the same name. Indeed, Java’s standard class library includes an absolute value method, called <span class="bold1">abs( )</span>. This method is overloaded by Java’s <span class="bold1">Math</span> class to handle all of the numeric types. Java determines which version of <span class="bold1">abs(</span> ) to call based upon the type of argument.</span></div>
<div class="calibre23"><span>The value of overloading is that it allows related methods to be accessed by use of a common name. Thus, the name <span class="bold1">abs</span> represents the <span class="italic">general action</span> that is being performed. It is left to the compiler to choose the correct <span class="italic">specific</span> version for a particular circumstance. You, the programmer, need only remember the general operation being performed. Through the application of polymorphism, several names have been reduced to one. Although this example is fairly simple, if you expand the concept, you can see how overloading can help manage greater complexity.</span></div>
<div class="calibre23"><span>When you overload a method, each version of that method can perform any activity you desire. There is no rule stating that overloaded methods must relate to one another. However, from a stylistic point of view, method overloading implies a relationship. Thus, while you can use the same name to overload unrelated methods, you should not. For example, you could use the name <span class="bold1">sqr</span> to create methods that return the <span class="italic">square</span> of an integer and the <span class="italic">square root</span> of a floating-point value. But these two operations are fundamentally different. Applying method overloading in this manner defeats its original purpose. In practice, you should overload only closely related operations.</span></div>
<div class="calibre35"><span><img alt="image" src="images/00005.jpg" class="calibre34"/></span></div>
<div class="calibre9"><span class="calibre10"><span><span class="bold1">Ask the Expert</span></span></span></div>
<div class="calibre19"><span><span class="bold1"><span><span class="calibre10">Q</span></span>:   I’ve heard the term <span class="italic">signature</span> used by Java programmers. What is it?</span></span></div>
<div class="calibre19"><span><span class="bold1"><span><span class="calibre10">A</span></span>:</span>   As it applies to Java, a signature is the name of a method plus its parameter list. Thus, for the purposes of overloading, no two methods within the same class can have the same signature. Notice that a signature does not include the return type, since it is not used by Java for overload resolution.</span></div>
<div class="calibre36"><span><img alt="image" src="images/00005.jpg" class="calibre34"/></span></div><div class="calibre18"> </div>
<div id="filepos582925" class="calibre9"><span class="calibre10"><span><span class="bold1">Overloading Constructors</span></span></span></div>
<div class="calibre12"><span>Like methods, constructors can also be overloaded. Doing so allows you to construct objects in a variety of ways. For example, consider the following program:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00421.jpg" class="calibre442"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The output from the program is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00422.jpg" class="calibre443"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span><span class="bold1">MyClass( )</span> is overloaded four ways, each constructing an object differently. The proper constructor is called based upon the parameters specified when <span class="bold1">new</span> is executed. By overloading a class’ constructor, you give the user of your class flexibility in the way objects are constructed.</span></div>
<div class="calibre23"><span>One of the most common reasons that constructors are overloaded is to allow one object to initialize another. For example, consider this program that uses the <span class="bold1">Summation</span> class to compute the summation of an integer value:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00423.jpg" class="calibre444"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The output is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00424.jpg" class="calibre445"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>Often, as this example shows, an advantage of providing a constructor that uses one object to initialize another is efficiency. In this case, when <span class="bold1">s2</span> is constructed, it is not necessary to recompute the summation. Of course, even in cases when efficiency is not an issue, it is often useful to provide a constructor that makes a copy of an object.</span></div>
<div class="calibre18"> </div><table cellspacing="0" cellpadding="0" class="calibre37">
<colgroup class="calibre38">
<col class="calibre72"/>
<col class="calibre73"/>
</colgroup>
<tr class="calibre41">
<td valign="top" id="filepos585278" class="calibre74"><span class="calibre10"><span class="bold1">Try This 6-2</span> </span></td>
<td valign="top" class="calibre75"><span class="calibre10">Overloading the Queue Constructor</span></td>
</tr></table><div class="calibre43"> </div>
<div class="calibre1"><span><img alt="image" src="images/00425.jpg" class="calibre446"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>In this project, you will enhance the <span class="bold1">Queue</span> class by giving it two additional constructors. The first will construct a new queue from another queue. The second will construct a queue, giving it initial values. As you will see, adding these constructors enhances the usability of <span class="bold1">Queue</span> substantially.</span></div>
<div class="calibre19"><span>  <span class="bold1">1</span>.  Create a file called <span class="bold1">QDemo2.java</span> and copy the updated <span class="bold1">Queue</span> class from <a href="#filepos561191">Try This 6-1</a> into it.</span></div>
<div class="calibre47"><span>  <span class="bold1">2</span>.  First, add the following constructor, which constructs a queue from a queue.</span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00426.jpg" class="calibre447"/></span></div>
<div class="calibre47"><span>        Look closely at this constructor. It initializes <span class="bold1">putloc</span> and <span class="bold1">getloc</span> to the values contained in the <span class="bold1">ob</span> parameter. It then allocates a new array to hold the queue and copies the elements from <span class="bold1">ob</span> into that array. Once constructed, the new queue will be an identical copy of the original, but both will be completely separate objects.</span></div>
<div class="calibre47"><span>  <span class="bold1">3</span>.  Now add the constructor that initializes the queue from a character array, as shown here:</span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00427.jpg" class="calibre448"/></span></div>
<div class="calibre47"><span>        This constructor creates a queue large enough to hold the characters in <span class="bold1">a</span> and then stores those characters in the queue.</span></div>
<div class="calibre47"><span>  <span class="bold1">4</span>.  Here is the complete updated <span class="bold1">Queue</span> class along with the <span class="bold1">QDemo2</span> class, which demonstrates it:</span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00428.jpg" class="calibre449"/></span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00429.jpg" class="calibre450"/></span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00430.jpg" class="calibre451"/></span></div>
<div class="calibre47"><span>        The output from the program is shown here:</span></div>
<div class="calibre19"><span><img alt="image" src="images/00431.jpg" class="calibre452"/></span></div>
<div class="calibre36"><span><img alt="image" src="images/00005.jpg" class="calibre34"/></span></div><div class="calibre18"> </div>
<div id="filepos589294" class="calibre9"><span class="calibre10"><span><span class="bold1">Recursion</span></span></span></div>
<div class="calibre12"><span>In Java, a method can call itself. This process is called <span class="italic">recursion</span>, and a method that calls itself is said to be <span class="italic">recursive</span>. In general, recursion is the process of defining something in terms of itself and is somewhat similar to a circular definition. The key component of a recursive method is a statement that executes a call to itself. Recursion is a powerful control mechanism.</span></div>
<div class="calibre23"><span>The classic example of recursion is the computation of the factorial of a number. The <span class="italic">factorial</span> of a number <span class="italic">N</span> is the product of all the whole numbers between 1 and <span class="italic">N</span>. For example, 3 factorial is 1 × 2 × 3, or 6. The following program shows a recursive way to compute the factorial of a number. For comparison purposes, a nonrecursive equivalent is also included.</span></div>
<div class="calibre1"><span><img alt="image" src="images/00432.jpg" class="calibre453"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The output from this program is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00433.jpg" class="calibre454"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The operation of the nonrecursive method <span class="bold1">factI( )</span> should be clear. It uses a loop starting at 1 and progressively multiplies each number by the moving product.</span></div>
<div class="calibre23"><span>The operation of the recursive <span class="bold1">factR( )</span> is a bit more complex. When <span class="bold1">factR( )</span> is called with an argument of 1, the method returns 1; otherwise, it returns the product of <span class="bold1">factR(n–1)*n</span>. To evaluate this expression, <span class="bold1">factR( )</span> is called with <span class="bold1">n–1</span>. This process repeats until <span class="bold1">n</span> equals 1 and the calls to the method begin returning. For example, when the factorial of 2 is calculated, the first call to <span class="bold1">factR( )</span> will cause a second call to be made with an argument of 1. This call will return 1, which is then multiplied by 2 (the original value of <span class="bold1">n</span>). The answer is then 2. You might find it interesting to insert <span class="bold1">println( )</span> statements into <span class="bold1">factR( )</span> that show at what level each call is, and what the intermediate results are.</span></div>
<div class="calibre23"><span>When a method calls itself, new local variables and parameters are allocated storage on the stack, and the method code is executed with these new variables from the start. A recursive call does not make a new copy of the method. Only the arguments are new. As each recursive call returns, the old local variables and parameters are removed from the stack, and execution resumes at the point of the call inside the method. Recursive methods could be said to “telescope” out and back.</span></div>
<div class="calibre23"><span>Recursive versions of many routines may execute a bit more slowly than their iterative equivalents because of the added overhead of the additional method calls. Too many recursive calls to a method could cause a stack overrun. Because storage for parameters and local variables is on the stack and each new call creates a new copy of these variables, it is possible that the stack could be exhausted. If this occurs, the Java run-time system will cause an exception. However, you probably will not have to worry about this unless a recursive routine runs wild. The main advantage to recursion is that some types of algorithms can be implemented more clearly and simply recursively than they can be iteratively. For example, the Quicksort sorting algorithm is quite difficult to implement in an iterative way. Also, some problems, especially AI-related ones, seem to lend themselves to recursive solutions. When writing recursive methods, you must have a conditional statement, such as an <span class="bold1">if</span>, somewhere to force the method to return without the recursive call being executed. If you don’t do this, once you call the method, it will never return. This type of error is very common when working with recursion. Use <span class="bold1">println( )</span> statements liberally so that you can watch what is going on and abort execution if you see that you have made a mistake.</span></div>
<div id="filepos593847" class="calibre1"><span class="calibre10"><span><span class="bold1">Understanding static</span></span></span></div>
<div class="calibre12"><span>There will be times when you will want to define a class member that will be used independently of any object of that class. Normally a class member must be accessed through an object of its class, but it is possible to create a member that can be used by itself, without reference to a specific instance. To create such a member, precede its declaration with the keyword <span class="bold1">static</span>. When a member is declared <span class="bold1">static</span>, it can be accessed before any objects of its class are created, and without reference to any object. You can declare both methods and variables to be <span class="bold1">static</span>. The most common example of a <span class="bold1">static</span> member is <span class="bold1">main( )</span>. <span class="bold1">main( )</span> is declared as <span class="bold1">static</span> because it must be called by the JVM when your program begins. Outside the class, to use a <span class="bold1">static</span> member, you need only specify the name of its class followed by the dot operator. No object needs to be created. For example, if you want to assign the value 10 to a <span class="bold1">static</span> variable called <span class="bold1">count</span> that is part of the <span class="bold1">Timer</span> class, use this line:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00434.jpg" class="calibre455"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>This format is similar to that used to access normal instance variables through an object, except that the class name is used. A <span class="bold1">static</span> method can be called in the same way—by use of the dot operator on the name of the class.</span></div>
<div class="calibre23"><span>Variables declared as <span class="bold1">static</span> are, essentially, global variables. When an object is declared, no copy of a <span class="bold1">static</span> variable is made. Instead, all instances of the class share the same <span class="bold1">static</span> variable. Here is an example that shows the differences between a <span class="bold1">static</span> variable and an instance variable:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00435.jpg" class="calibre456"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The output from the program is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00436.jpg" class="calibre457"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>As you can see, the <span class="bold1">static</span> variable <span class="bold1">y</span> is shared by both <span class="bold1">ob1</span> and <span class="bold1">ob2</span>. Changing it affects the entire class, not just an instance.</span></div>
<div class="calibre23"><span>The difference between a <span class="bold1">static</span> method and a normal method is that the <span class="bold1">static</span> method is called through its class name, without any object of that class being created. You have seen an example of this already: the <span class="bold1">sqrt( )</span> method, which is a <span class="bold1">static</span> method within Java’s standard <span class="bold1">Math</span> class. Here is an example that creates a <span class="bold1">static</span> method:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00437.jpg" class="calibre458"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The output is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00438.jpg" class="calibre459"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>Methods declared as <span class="bold1">static</span> have several restrictions:</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   They can directly call only other <span class="bold1">static</span> methods.</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   They can directly access only <span class="bold1">static</span> data.</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   They do not have a <span class="bold1">this</span> reference.</span></div>
<div class="calibre27"><span>For example, in the following class, the <span class="bold1">static</span> method <span class="bold1">valDivDenom( )</span> is illegal:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00439.jpg" class="calibre460"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>Here, <span class="bold1">denom</span> is a normal instance variable that cannot be accessed within a <span class="bold1">static</span> method.</span></div>
<div id="filepos598607" class="calibre1"><span class="calibre10"><span><span class="bold1">Static Blocks</span></span></span></div>
<div class="calibre12"><span>Sometimes a class will require some type of initialization before it is ready to create objects. For example, it might need to establish a connection to a remote site. It also might need to initialize certain <span class="bold1">static</span> variables before any of the class’ <span class="bold1">static</span> methods are used. To handle these types of situations, Java allows you to declare a <span class="bold1">static</span> block. A <span class="bold1">static</span> block is executed when the class is first loaded. Thus, it is executed before the class can be used for any other purpose. Here is an example of a <span class="bold1">static</span> block:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00440.jpg" class="calibre461"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>The output is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00441.jpg" class="calibre462"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>As you can see, the <span class="bold1">static</span> block is executed before any objects are constructed.</span></div>
<div class="calibre18"> </div><table cellspacing="0" cellpadding="0" class="calibre37">
<colgroup class="calibre38">
<col class="calibre72"/>
<col class="calibre73"/>
</colgroup>
<tr class="calibre41">
<td valign="top" id="filepos600026" class="calibre74"><span class="calibre10"><span class="bold1">Try This 6-3</span> </span></td>
<td valign="top" class="calibre75"><span class="calibre10">The Quicksort</span></td>
</tr></table><div class="calibre43"> </div>
<div class="calibre1"><span><img alt="image" src="images/00442.jpg" class="calibre463"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>In <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_012.html#filepos452160">Chapter 5</a> you were shown a simple sorting method called the Bubble sort. It was mentioned at the time that substantially better sorts exist. Here you will develop a version of one of the best: the Quicksort. The Quicksort, invented and named by C.A.R. Hoare, is the best general-purpose sorting algorithm currently available. The reason it could not be shown in <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_012.html#filepos452160">Chapter 5</a> is that the best implementations of the Quicksort rely on recursion. The version we will develop sorts a character array, but the logic can be adapted to sort any type of object you like.</span></div>
<div class="calibre23"><span>The Quicksort is built on the idea of partitions. The general procedure is to select a value, called the <span class="italic">comparand</span>, and then to partition the array into two sections. All elements greater than or equal to the partition value are put on one side, and those less than the value are put on the other. This process is then repeated for each remaining section until the array is sorted. For example, given the array <span class="bold1">fedacb</span> and using the value <span class="bold1">d</span> as the comparand, the first pass of the Quicksort would rearrange the array as follows:</span></div>
<div class="calibre11"> </div><table cellspacing="0" cellpadding="3" border="1" class="calibre37">
<colgroup class="calibre38">
<col class="calibre464"/>
<col class="calibre465"/>
</colgroup>
<tr class="calibre41">
<td valign="top" class="calibre42"><span class="bold1">Initial</span></td>
<td valign="top" class="calibre42"><span class="bold1">f e d a c b</span></td>
</tr>
<tr class="calibre41">
<td valign="top" class="calibre42"><span class="bold1">Pass1</span></td>
<td valign="top" class="calibre42"><span class="bold1">b c a d e f</span></td>
</tr>
</table><div class="calibre43"> </div>
<div class="calibre23"><span>This process is then repeated for each section—that is, <span class="bold1">bca</span> and <span class="bold1">def</span>. As you can see, the process is essentially recursive in nature, and indeed, the cleanest implementation of Quicksort is recursive.</span></div>
<div class="calibre23"><span>You can select the comparand value in two ways. You can either choose it at random, or you can select it by averaging a small set of values taken from the array. For optimal sorting, you should select a value that is precisely in the middle of the range of values. However, this is not easy to do for most sets of data. In the worst case, the value chosen is at one extremity. Even in this case, however, Quicksort still performs correctly. The version of Quicksort that we will develop selects the middle element of the array as the comparand.</span></div>
<div class="calibre19"><span>  <span class="bold1">1</span>.  Create a file called <span class="bold1">QSDemo.java</span>.</span></div>
<div class="calibre47"><span>  <span class="bold1">2</span>.  First, create the <span class="bold1">Quicksort</span> class shown here:</span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00443.jpg" class="calibre466"/></span></div>
<div class="calibre47"><span>        To keep the interface to the Quicksort simple, the <span class="bold1">Quicksort</span> class provides the <span class="bold1">qsort( )</span> method, which sets up a call to the actual Quicksort method, <span class="bold1">qs( )</span>. This enables the Quicksort to be called with just the name of the array to be sorted, without having to provide an initial partition. Since <span class="bold1">qs( )</span> is only used internally, it is specified as <span class="bold1">private</span>.</span></div>
<div class="calibre47"><span>  <span class="bold1">3</span>.  To use the <span class="bold1">Quicksort</span>, simply call <span class="bold1">Quicksort.qsort( )</span>. Since <span class="bold1">qsort( )</span> is specified as <span class="bold1">static</span>, it can be called through its class rather than on an object. Thus, there is no need to create a <span class="bold1">Quicksort</span> object. After the call returns, the array will be sorted. Remember, this version works only for character arrays, but you can adapt the logic to sort any type of arrays you want.</span></div>
<div class="calibre47"><span>  <span class="bold1">4</span>.  Here is a program that demonstrates <span class="bold1">Quicksort</span>:</span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00444.jpg" class="calibre467"/></span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00445.jpg" class="calibre468"/></span></div>
<div class="calibre36"><span><img alt="image" src="images/00005.jpg" class="calibre34"/></span></div><div class="calibre18"> </div>
<div id="filepos605556" class="calibre9"><span class="calibre10"><span><span class="bold1">Introducing Nested and Inner Classes</span></span></span></div>
<div class="calibre12"><span>In Java, you can define a <span class="italic">nested class</span>. This is a class that is declared within another class. Frankly, the nested class is a somewhat advanced topic. In fact, nested classes were not even allowed in the first version of Java. It was not until Java 1.1 that they were added. However, it is important that you know what they are and the mechanics of how they are used because they play an important role in many real-world programs.</span></div>
<div class="calibre23"><span>A nested class does not exist independently of its enclosing class. Thus, the scope of a nested class is bounded by its outer class. A nested class that is declared directly within its enclosing class scope is a member of its enclosing class. It is also possible to declare a nested class that is local to a block.</span></div>
<div class="calibre23"><span>There are two general types of nested classes: those that are preceded by the <span class="bold1">static</span> modifier and those that are not. The only type that we are concerned about in this book is the non-static variety. This type of nested class is also called an <span class="italic">inner class</span>. It has access to all of the variables and methods of its outer class and may refer to them directly in the same way that other non-<span class="bold1">static</span> members of the outer class do.</span></div>
<div class="calibre23"><span>Sometimes an inner class is used to provide a set of services that is used only by its enclosing class. Here is an example that uses an inner class to compute various values for its enclosing class:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00446.jpg" class="calibre196"/></span></div><div class="calibre11"> </div>
<div class="calibre1"><span><img alt="image" src="images/00447.jpg" class="calibre469"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The output from the program is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00448.jpg" class="calibre470"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>In this example, the inner class <span class="bold1">Inner</span> computes various values from the array <span class="bold1">nums</span>, which is a member of <span class="bold1">Outer</span>. As explained, an inner class has access to the members of its enclosing class, so it is perfectly acceptable for <span class="bold1">Inner</span> to access the <span class="bold1">nums</span> array directly. Of course, the opposite is not true. For example, it would not be possible for <span class="bold1">analyze( )</span> to invoke the <span class="bold1">min( )</span> method directly, without creating an <span class="bold1">Inner</span> object.</span></div>
<div class="calibre23"><span>As mentioned, it is possible to nest a class within a block scope. Doing so simply creates a localized class that is not known outside its block. The following example adapts the <span class="bold1">ShowBits</span> class developed in <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_012.html#filepos534542">Try This 5-3</a> for use as a local class.</span></div>
<div class="calibre1"><span><img alt="image" src="images/00449.jpg" class="calibre471"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The output from this version of the program is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00450.jpg" class="calibre472"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>In this example, the <span class="bold1">ShowBits</span> class is not known outside of <span class="bold1">main( )</span>, and any attempt to access it by any method other than <span class="bold1">main( )</span> will result in an error.</span></div>
<div class="calibre23"><span>One last point: You can create an inner class that does not have a name. This is called an <span class="italic">anonymous inner class</span>. An object of an anonymous inner class is instantiated when the class is declared, using <span class="bold1">new</span>. Anonymous inner classes are discussed further in <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_023.html#filepos1300493">Chapter 16</a>.</span></div>
<div id="filepos609827" class="calibre1"><span class="calibre10"><span><span class="bold1">Varargs: Variable-Length Arguments</span></span></span></div>
<div class="calibre12"><span>Sometimes you will want to create a method that takes a variable number of arguments, based on its precise usage. For example, a method that opens an Internet connection might take a user name, password, file name, protocol, and so on, but supply defaults if some of this information is not provided. In this situation, it would be convenient to pass only the arguments to which the defaults did not apply. To create such a method implies that there must be some way to create a list of arguments that is variable in length, rather than fixed.</span></div>
<div class="calibre23"><span>In the past, methods that required a variable-length argument list could be handled two ways, neither of which was particularly pleasing. First, if the maximum number of arguments was small and known, then you could create overloaded versions of the method, one for each way the method could be called. Although this works and is suitable for some situations, it applies to only a narrow class of situations. In cases where the maximum number of potential arguments is larger, or unknowable, a second approach was used in which the arguments were put into an array, and then the array was passed to the method. Frankly, both of these approaches often resulted in clumsy solutions, and it was widely acknowledged that a better approach was needed.</span></div>
<div class="calibre35"><span><img alt="image" src="images/00005.jpg" class="calibre34"/></span></div>
<div class="calibre9"><span class="calibre10"><span><span class="bold1">Ask the Expert</span></span></span></div>
<div class="calibre19"><span><span class="bold1"><span><span class="calibre10">Q</span></span>:   What makes a</span> static <span class="bold1">nested class different from a non-</span>static <span class="bold1">one?</span></span></div>
<div class="calibre19"><span><span class="bold1"><span><span class="calibre10">A</span></span>:</span>   A <span class="bold1">static</span> nested class is one that has the <span class="bold1">static</span> modifier applied. Because it is <span class="bold1">static</span>, it can access only other <span class="bold1">static</span> members of the enclosing class directly. It must access other members of its outer class through an object reference.</span></div>
<div class="calibre36"><span><img alt="image" src="images/00005.jpg" class="calibre34"/></span></div><div class="calibre18"> </div>
<div class="calibre23"><span>Beginning with JDK 5, this need was addressed by the inclusion of a feature that simplified the creation of methods that require a variable number of arguments. This feature is called <span class="italic">varargs</span>, which is short for variable-length arguments. A method that takes a variable number of arguments is called a <span class="italic">variable-arity method</span>, or simply a <span class="italic">varargs method</span>. The parameter list for a varargs method is not fixed, but rather variable in length. Thus, a varargs method can take a variable number of arguments.</span></div>
<div id="filepos613012" class="calibre1"><span class="calibre10"><span><span class="bold1">Varargs Basics</span></span></span></div>
<div class="calibre12"><span>A variable-length argument is specified by three periods (…). For example, here is how to write a method called <span class="bold1">vaTest( )</span> that takes a variable number of arguments:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00451.jpg" class="calibre473"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>Notice that <span class="bold1">v</span> is declared as shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00452.jpg" class="calibre474"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>This syntax tells the compiler that <span class="bold1">vaTest( )</span> can be called with zero or more arguments. Furthermore, it causes <span class="bold1">v</span> to be implicitly declared as an array of type <span class="bold1">int[ ]</span>. Thus, inside <span class="bold1">vaTest( )</span>, <span class="bold1">v</span> is accessed using the normal array syntax.</span></div>
<div class="calibre23"><span>Here is a complete program that demonstrates <span class="bold1">vaTest( )</span>:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00453.jpg" class="calibre475"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>The output from the program is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00454.jpg" class="calibre476"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>There are two important things to notice about this program. First, as explained, inside <span class="bold1">vaTest( )</span>, <span class="bold1">v</span> is operated on as an array. This is because <span class="bold1">v</span>
<span class="italic">is an array</span>. The … syntax simply tells the compiler that a variable number of arguments will be used, and that these arguments will be stored in the array referred to by <span class="bold1">v</span>. Second, in <span class="bold1">main( )</span>, <span class="bold1">vaTest( )</span> is called with different numbers of arguments, including no arguments at all. The arguments are automatically put in an array and passed to <span class="bold1">v</span>. In the case of no arguments, the length of the array is zero.</span></div>
<div class="calibre23"><span>A method can have “normal” parameters along with a variable-length parameter. However, the variable-length parameter must be the last parameter declared by the method. For example, this method declaration is perfectly acceptable:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00455.jpg" class="calibre477"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>In this case, the first three arguments used in a call to <span class="bold1">doIt( )</span> are matched to the first three parameters. Then, any remaining arguments are assumed to belong to <span class="bold1">vals</span>.</span></div>
<div class="calibre23"><span>Here is a reworked version of the <span class="bold1">vaTest( )</span> method that takes a regular argument and a variable-length argument:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00456.jpg" class="calibre478"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>The output from this program is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00457.jpg" class="calibre479"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>Remember, the varargs parameter must be last. For example, the following declaration is incorrect:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00458.jpg" class="calibre480"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>Here, there is an attempt to declare a regular parameter after the varargs parameter, which is illegal. There is one more restriction to be aware of: there must be only one varargs parameter. For example, this declaration is also invalid:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00459.jpg" class="calibre480"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>The attempt to declare the second varargs parameter is illegal.</span></div>
<div id="filepos617411" class="calibre1"><span class="calibre10"><span><span class="bold1">Overloading Varargs Methods</span></span></span></div>
<div class="calibre12"><span>You can overload a method that takes a variable-length argument. For example, the following program overloads <span class="bold1">vaTest( )</span> three times:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00460.jpg" class="calibre328"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The output produced by this program is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00461.jpg" class="calibre481"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>This program illustrates both ways that a varargs method can be overloaded. First, the types of its vararg parameter can differ. This is the case for <span class="bold1">vaTest(int …)</span> and <span class="bold1">vaTest(boolean …)</span>. Remember, the … causes the parameter to be treated as an array of the specified type. Therefore, just as you can overload methods by using different types of array parameters, you can overload varargs methods by using different types of varargs. In this case, Java uses the type difference to determine which overloaded method to call.</span></div>
<div class="calibre23"><span>The second way to overload a varargs method is to add one or more normal parameters. This is what was done with <span class="bold1">vaTest(String, int …)</span>. In this case, Java uses both the number of arguments and the type of the arguments to determine which method to call.</span></div>
<div id="filepos619096" class="calibre1"><span class="calibre10"><span><span class="bold1">Varargs and Ambiguity</span></span></span></div>
<div class="calibre12"><span>Somewhat unexpected errors can result when overloading a method that takes a variable-length argument. These errors involve ambiguity because it is possible to create an ambiguous call to an overloaded varargs method. For example, consider the following program:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00462.jpg" class="calibre482"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>In this program, the overloading of <span class="bold1">vaTest( )</span> is perfectly correct. However, this program will not compile because of the following call:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00463.jpg" class="calibre411"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>Because the vararg parameter can be empty, this call could be translated into a call to <span class="bold1">vaTest(int …)</span> or to <span class="bold1">vaTest(boolean …)</span>. Both are equally valid. Thus, the call is inherently ambiguous.</span></div>
<div class="calibre23"><span>Here is another example of ambiguity. The following overloaded versions of <span class="bold1">vaTest( )</span> are inherently ambiguous even though one takes a normal parameter:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00464.jpg" class="calibre483"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>Although the parameter lists of <span class="bold1">vaTest( )</span> differ, there is no way for the compiler to resolve the following call:</span></div>
<div class="calibre27"><span>vaTest(1)</span></div>
<div class="calibre27"><span>Does this translate into a call to <span class="bold1">vaTest(int …)</span>, with one varargs argument, or into a call to <span class="bold1">vaTest(int, int …)</span> with no varargs arguments? There is no way for the compiler to answer this question. Thus, the situation is ambiguous.</span></div>
<div class="calibre23"><span>Because of ambiguity errors like those just shown, sometimes you will need to forego overloading and simply use two different method names. Also, in some cases, ambiguity errors expose a conceptual flaw in your code, which you can remedy by more carefully crafting a solution.</span></div>
<div id="filepos621591" class="calibre44"><span class="calibre10"><span><img alt="image" src="images/00059.jpg" class="calibre104"/>   <span class="bold1"><span class="italic">Chapter 6 Self Test</span></span></span></span></div><div class="calibre11"> </div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos621871" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1517200">1</a></span>.  Given this fragment,</span></div>
<div class="calibre31"><blockquote class="calibre66"><span><img alt="image" src="images/00465.jpg" class="calibre484"/></span></blockquote></div>
<div class="calibre21"><span>        is the following fragment correct?</span></div>
<div class="calibre31"><blockquote class="calibre66"><span><img alt="image" src="images/00466.jpg" class="calibre485"/></span></blockquote></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos622560" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1518000">2</a></span>.  An access modifier must __________ a member’s declaration.</span></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos622793" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1518337">3</a></span>.  The complement of a queue is a stack. It uses first-in, last-out accessing and is often likened to a stack of plates. The first plate put on the table is the last plate used. Create a stack class called <span class="bold1">Stack</span> that can hold characters. Call the methods that access the stack <span class="bold1">push( )</span> and <span class="bold1">pop( )</span>. Allow the user to specify the size of the stack when it is created. Keep all other members of the <span class="bold1">Stack</span> class private. (Hint: You can use the <span class="bold1">Queue</span> class as a model; just change the way the data is accessed.)</span></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos623498" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1519811">4</a></span>.  Given this class,</span></div>
<div class="calibre31"><blockquote class="calibre66"><span><img alt="image" src="images/00467.jpg" class="calibre486"/></span></blockquote></div>
<div class="calibre21"><span>        write a method called <span class="bold1">swap( )</span> that exchanges the contents of the objects referred to by two <span class="bold1">Test</span> object references.</span></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos624121" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1520537">5</a></span>.  Is the following fragment correct?</span></div>
<div class="calibre31"><blockquote class="calibre66"><span><img alt="image" src="images/00468.jpg" class="calibre487"/></span></blockquote></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos624480" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1521163">6</a></span>.  Write a recursive method that displays the contents of a string backwards.</span></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos624722" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1517200">7</a></span>.  If all objects of a class need to share the same variable, how must you declare that variable?</span></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos624984" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1521968">8</a></span>.  Why might you need to use a <span class="bold1">static</span> block?</span></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos625200" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1522395">9</a></span>.  What is an inner class?</span></div>
<div class="calibre47"><span><span class="bold1"><a id="filepos625375" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1522710">10</a></span>.  To make a member accessible by only other members of its class, what access modifier must be used?</span></div>
<div class="calibre47"><span><span class="bold1"><a id="filepos625627" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1523073">11</a></span>.  The name of a method plus its parameter list constitutes the method’s _______________.</span></div>
<div class="calibre47"><span><span class="bold1"><a id="filepos625874" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1523421">12</a></span>.  An <span class="bold1">int</span> argument is passed to a method by using call-by-_______________.</span></div>
<div class="calibre47"><span><span class="bold1"><a id="filepos626106" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1523750">13</a></span>.  Create a varargs method called <span class="bold1">sum( )</span> that sums the <span class="bold1">int</span> values passed to it. Have it return the result. Demonstrate its use.</span></div>
<div class="calibre47"><span><span class="bold1"><a id="filepos626398" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1524352">14</a></span>.  Can a varargs method be overloaded?</span></div>
<div class="calibre47"><span><span class="bold1"><a id="filepos626587" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1524642">15</a></span>.  Show an example of an overloaded varargs method that is ambiguous.</span></div>  <div class="mbppagebreak" id="calibre_pb_13"></div>
</body></html>
