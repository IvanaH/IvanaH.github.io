<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Java&amp;#8482;: A Beginner&amp;#8217;s Guide Sixth Edition</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<div id="filepos384353" class="calibre29"><span><img alt="image" src="images/00003.jpg" class="calibre30"/></span></div><div class="calibre11"> </div>
<div class="calibre31"><span class="calibre2"><span><big class="calibre3"><big class="calibre4"><big class="calibre5"><big class="calibre6"><big class="calibre32"><big class="calibre4">Chapter 4</big></big></big></big></big></big></span></span></div>
<div class="calibre9"><span class="calibre2"><span>Introducing Classes, Objects, and Methods</span></span></div><div class="calibre33"> </div>
<div class="calibre1"><span class="calibre10"><span><span class="bold1">Key Skills &amp; Concepts</span></span></span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Know the fundamentals of the class</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Understand how objects are created</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Understand how reference variables are assigned</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Create methods, return values, and use parameters</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Use the <span class="bold1">return</span> keyword</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Return a value from a method</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Add parameters to a method</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Utilize constructors</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Create parameterized constructors</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Understand <span class="bold1">new</span></span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Understand garbage collection and finalizers</span></div>
<div class="calibre26"><span><img alt="image" src="images/00002.jpg" class="calibre25"/>   Use the <span class="bold1">this</span> keyword</span></div>
<div class="calibre1"><span><img alt="image" src="images/00004.jpg" class="calibre34"/></span></div><div class="calibre18"> </div>
<div class="calibre12"><span><span><span class="calibre2">B</span></span>efore you can go much further in your study of Java, you need to learn about the class. The class is the essence of Java. It is the foundation upon which the entire Java language is built because the class defines the nature of an object. As such, the class forms the basis for object-oriented programming in Java. Within a class are defined data and code that acts upon that data. The code is contained in methods. Because classes, objects, and methods are fundamental to Java, they are introduced in this chapter. Having a basic understanding of these features will allow you to write more sophisticated programs and better understand certain key Java elements described in the following chapter.</span></div>
<div id="filepos388234" class="calibre1"><span class="calibre10"><span><span class="bold1">Class Fundamentals</span></span></span></div>
<div class="calibre12"><span>Since all Java program activity occurs within a class, we have been using classes since the start of this book. Of course, only extremely simple classes have been used, and we have not taken advantage of the majority of their features. As you will see, classes are substantially more powerful than the limited ones presented so far.</span></div>
<div class="calibre23"><span>Let’s begin by reviewing the basics. A class is a template that defines the form of an object. It specifies both the data and the code that will operate on that data. Java uses a class specification to construct <span class="italic">objects</span>. Objects are <span class="italic">instances</span> of a class. Thus, a class is essentially a set of plans that specify how to build an object. It is important to be clear on one issue: a class is a logical abstraction. It is not until an object of that class has been created that a physical representation of that class exists in memory.</span></div>
<div class="calibre23"><span>One other point: Recall that the methods and variables that constitute a class are called <span class="italic">members</span> of the class. The data members are also referred to as <span class="italic">instance variables</span>.</span></div>
<div id="filepos389636" class="calibre1"><span class="calibre10"><span><span class="bold1">The General Form of a Class</span></span></span></div>
<div class="calibre12"><span>When you define a class, you declare its exact form and nature. You do this by specifying the instance variables that it contains and the methods that operate on them. Although very simple classes might contain only methods or only instance variables, most real-world classes contain both.</span></div>
<div class="calibre23"><span>A class is created by using the keyword <span class="bold1">class</span>. A simplified general form of a <span class="bold1">class</span> definition is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00216.jpg" class="calibre250"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>Although there is no syntactic rule that enforces it, a well-designed class should define one and only one logical entity. For example, a class that stores names and telephone numbers will not normally also store information about the stock market, average rainfall, sunspot cycles, or other unrelated information. The point here is that well-designed class groups logically connected information. Putting unrelated information into the same class will quickly destructure your code!</span></div>
<div class="calibre23"><span>Up to this point, the classes that we have been using have had only one method: <span class="bold1">main( )</span>. Soon you will see how to create others. However, notice that the general form of a class does not specify a <span class="bold1">main( )</span> method. A <span class="bold1">main( )</span> method is required only if that class is the starting point for your program. Also, some types of Java applications, such as applets, don’t require a <span class="bold1">main( )</span>.</span></div>
<div id="filepos391498" class="calibre1"><span class="calibre10"><span><span class="bold1">Defining a Class</span></span></span></div>
<div class="calibre12"><span>To illustrate classes, we will develop a class that encapsulates information about vehicles, such as cars, vans, and trucks. This class is called <span class="bold1">Vehicle</span>, and it will store three items of information about a vehicle: the number of passengers that it can carry, its fuel capacity, and its average fuel consumption (in miles per gallon).</span></div>
<div class="calibre23"><span>The first version of <span class="bold1">Vehicle</span> is shown next. It defines three instance variables: <span class="bold1">passengers</span>, <span class="bold1">fuelcap</span>, and <span class="bold1">mpg</span>. Notice that <span class="bold1">Vehicle</span> does not contain any methods. Thus, it is currently a data-only class. (Subsequent sections will add methods to it.)</span></div>
<div class="calibre1"><span><img alt="image" src="images/00217.jpg" class="calibre251"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>A <span class="bold1">class</span> definition creates a new data type. In this case, the new data type is called <span class="bold1">Vehicle</span>. You will use this name to declare objects of type <span class="bold1">Vehicle</span>. Remember that a <span class="bold1">class</span> declaration is only a type description; it does not create an actual object. Thus, the preceding code does not cause any objects of type <span class="bold1">Vehicle</span> to come into existence.</span></div>
<div class="calibre23"><span>To actually create a <span class="bold1">Vehicle</span> object, you will use a statement like the following:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00218.jpg" class="calibre252"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>After this statement executes, <span class="bold1">minivan</span> will be an instance of <span class="bold1">Vehicle</span>. Thus, it will have “physical” reality. For the moment, don’t worry about the details of this statement.</span></div>
<div class="calibre23"><span>Each time you create an instance of a class, you are creating an object that contains its own copy of each instance variable defined by the class. Thus, every <span class="bold1">Vehicle</span> object will contain its own copies of the instance variables <span class="bold1">passengers</span>, <span class="bold1">fuelcap</span>, and <span class="bold1">mpg</span>. To access these variables, you will use the dot (.) operator. The <span class="italic">dot operator</span> links the name of an object with the name of a member. The general form of the dot operator is shown here:</span></div>
<div class="calibre27"><span><span class="italic">object.member</span></span></div>
<div class="calibre27"><span>Thus, the object is specified on the left, and the member is put on the right. For example, to assign the <span class="bold1">fuelcap</span> variable of <span class="bold1">minivan</span> the value 16, use the following statement:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00219.jpg" class="calibre253"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>In general, you can use the dot operator to access both instance variables and methods.</span></div>
<div class="calibre23"><span>Here is a complete program that uses the <span class="bold1">Vehicle</span> class:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00220.jpg" class="calibre254"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>You should call the file that contains this program <span class="bold1">VehicleDemo.java</span> because the <span class="bold1">main( )</span> method is in the class called <span class="bold1">VehicleDemo</span>, not the class called <span class="bold1">Vehicle</span>. When you compile this program, you will find that two <span class="bold1">.class</span> files have been created, one for <span class="bold1">Vehicle</span> and one for <span class="bold1">VehicleDemo</span>. The Java compiler automatically puts each class into its own <span class="bold1">.class</span> file. It is not necessary for both the <span class="bold1">Vehicle</span> and the <span class="bold1">VehicleDemo</span> class to be in the same source file. You could put each class in its own file, called <span class="bold1">Vehicle.java</span> and <span class="bold1">VehicleDemo.java</span>, respectively.</span></div>
<div class="calibre23"><span>To run this program, you must execute <span class="bold1">VehicleDemo.class</span>. The following output is displayed:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00221.jpg" class="calibre255"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>Before moving on, let’s review a fundamental principle: each object has its own copies of the instance variables defined by its class. Thus, the contents of the variables in one object can differ from the contents of the variables in another. There is no connection between the two objects except for the fact that they are both objects of the same type. For example, if you have two <span class="bold1">Vehicle</span> objects, each has its own copy of <span class="bold1">passengers</span>, <span class="bold1">fuelcap</span>, and <span class="bold1">mpg</span>, and the contents of these can differ between the two objects. The following program demonstrates this fact. (Notice that the class with <span class="bold1">main( )</span> is now called <span class="bold1">TwoVehicles</span>.)</span></div>
<div class="calibre1"><span><img alt="image" src="images/00222.jpg" class="calibre256"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The output produced by this program is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00223.jpg" class="calibre257"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>As you can see, <span class="bold1">minivan</span>’s data is completely separate from the data contained in <span class="bold1">sportscar</span>. The following illustration depicts this situation.</span></div>
<div class="calibre29"><span><img alt="image" src="images/00224.jpg" class="calibre258"/></span></div><div class="calibre11"> </div>
<div id="filepos397501" class="calibre1"><span class="calibre10"><span><span class="bold1">How Objects Are Created</span></span></span></div>
<div class="calibre12"><span>In the preceding programs, the following line was used to declare an object of type <span class="bold1">Vehicle</span>:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00225.jpg" class="calibre259"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>This declaration performs two functions. First, it declares a variable called <span class="bold1">minivan</span> of the class type <span class="bold1">Vehicle</span>. This variable does not define an object. Instead, it is simply a variable that can <span class="italic">refer to</span> an object. Second, the declaration creates a physical copy of the object and assigns to <span class="bold1">minivan</span> a reference to that object. This is done by using the <span class="bold1">new</span> operator.</span></div>
<div class="calibre23"><span>The <span class="bold1">new</span> operator dynamically allocates (that is, allocates at run time) memory for an object and returns a reference to it. This reference is, more or less, the address in memory of the object allocated by <span class="bold1">new</span>. This reference is then stored in a variable. Thus, in Java, all class objects must be dynamically allocated.</span></div>
<div class="calibre23"><span>The two steps combined in the preceding statement can be rewritten like this to show each step individually:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00226.jpg" class="calibre260"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>The first line declares <span class="bold1">minivan</span> as a reference to an object of type <span class="bold1">Vehicle</span>. Thus, <span class="bold1">minivan</span> is a variable that can refer to an object, but it is not an object itself. At this point, <span class="bold1">minivan</span> does not refer to an object. The next line creates a new <span class="bold1">Vehicle</span> object and assigns a reference to it to <span class="bold1">minivan</span>. Now, <span class="bold1">minivan</span> is linked with an object.</span></div>
<div id="filepos399563" class="calibre1"><span class="calibre10"><span><span class="bold1">Reference Variables and Assignment</span></span></span></div>
<div class="calibre12"><span>In an assignment operation, object reference variables act differently than do variables of a primitive type, such as <span class="bold1">int</span>. When you assign one primitive-type variable to another, the situation is straightforward. The variable on the left receives a <span class="italic">copy</span> of the <span class="italic">value</span> of the variable on the right. When you assign one object reference variable to another, the situation is a bit more complicated because you are changing the object that the reference variable refers to. The effect of this difference can cause some counterintuitive results. For example, consider the following fragment:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00227.jpg" class="calibre261"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>At first glance, it is easy to think that <span class="bold1">car1</span> and <span class="bold1">car2</span> refer to different objects, but this is not the case. Instead, <span class="bold1">car1</span> and <span class="bold1">car2</span> will both refer to the same object. The assignment of <span class="bold1">car1</span> to <span class="bold1">car2</span> simply makes <span class="bold1">car2</span> refer to the same object as does <span class="bold1">car1</span>. Thus, the object can be acted upon by either <span class="bold1">car1</span> or <span class="bold1">car2</span>. For example, after the assignment</span></div>
<div class="calibre1"><span><img alt="image" src="images/00228.jpg" class="calibre262"/></span></div><div class="calibre11"> </div>
<div class="calibre27"><span>executes, both of these <span class="bold1">println( )</span> statements</span></div>
<div class="calibre1"><span><img alt="image" src="images/00229.jpg" class="calibre263"/></span></div><div class="calibre11"> </div>
<div class="calibre27"><span>display the same value: 26.</span></div>
<div class="calibre23"><span>Although <span class="bold1">car1</span> and <span class="bold1">car2</span> both refer to the same object, they are not linked in any other way. For example, a subsequent assignment to <span class="bold1">car2</span> simply changes the object to which <span class="bold1">car2</span> refers. For example:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00230.jpg" class="calibre264"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>After this sequence executes, <span class="bold1">car2</span> refers to the same object as <span class="bold1">car3</span>. The object referred to by <span class="bold1">car1</span> is unchanged.</span></div>
<div id="filepos402086" class="calibre1"><span class="calibre10"><span><span class="bold1">Methods</span></span></span></div>
<div class="calibre12"><span>As explained, instance variables and methods are constituents of classes. So far, the <span class="bold1">Vehicle</span> class contains data, but no methods. Although data-only classes are perfectly valid, most classes will have methods. Methods are subroutines that manipulate the data defined by the class and, in many cases, provide access to that data. In most cases, other parts of your program will interact with a class through its methods.</span></div>
<div class="calibre23"><span>A method contains one or more statements. In well-written Java code, each method performs only one task. Each method has a name, and it is this name that is used to call the method. In general, you can give a method whatever name you please. However, remember that <span class="bold1">main( )</span> is reserved for the method that begins execution of your program. Also, don’t use Java’s keywords for method names.</span></div>
<div class="calibre23"><span>When denoting methods in text, this book has used and will continue to use a convention that has become common when writing about Java. A method will have parentheses after its name. For example, if a method’s name is <span class="bold1">getval</span>, it will be written <span class="bold1">getval( )</span> when its name is used in a sentence. This notation will help you distinguish variable names from method names in this book.</span></div>
<div class="calibre23"><span>The general form of a method is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00231.jpg" class="calibre265"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>Here, <span class="italic">ret-type</span> specifies the type of data returned by the method. This can be any valid type, including class types that you create. If the method does not return a value, its return type must be <span class="bold1">void</span>. The name of the method is specified by <span class="italic">name</span>. This can be any legal identifier other than those already used by other items within the current scope. The <span class="italic">parameter-list</span> is a sequence of type and identifier pairs separated by commas. Parameters are essentially variables that receive the value of the <span class="italic">arguments</span> passed to the method when it is called. If the method has no parameters, the parameter list will be empty.</span></div>
<div id="filepos404607" class="calibre1"><span class="calibre10"><span><span class="bold1">Adding a Method to the Vehicle Class</span></span></span></div>
<div class="calibre12"><span>As just explained, the methods of a class typically manipulate and provide access to the data of the class. With this in mind, recall that <span class="bold1">main( )</span> in the preceding examples computed the range of a vehicle by multiplying its fuel consumption rate by its fuel capacity. While technically correct, this is not the best way to handle this computation. The calculation of a vehicle’s range is something that is best handled by the <span class="bold1">Vehicle</span> class itself. The reason for this conclusion is easy to understand: the range of a vehicle is dependent upon the capacity of the fuel tank and the rate of fuel consumption, and both of these quantities are encapsulated by <span class="bold1">Vehicle</span>. By adding a method to <span class="bold1">Vehicle</span> that computes the range, you are enhancing its object-oriented structure. To add a method to <span class="bold1">Vehicle</span>, specify it within <span class="bold1">Vehicle</span>’s declaration. For example, the following version of <span class="bold1">Vehicle</span> contains a method called <span class="bold1">range( )</span> that displays the range of the vehicle.</span></div>
<div class="calibre1"><span><img alt="image" src="images/00232.jpg" class="calibre266"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>This program generates the following output:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00233.jpg" class="calibre267"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>Let’s look at the key elements of this program, beginning with the <span class="bold1">range( )</span> method itself. The first line of <span class="bold1">range( )</span> is</span></div>
<div class="calibre1"><span><img alt="image" src="images/00234.jpg" class="calibre268"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>This line declares a method called <span class="bold1">range</span> that has no parameters. Its return type is <span class="bold1">void</span>. Thus, <span class="bold1">range( )</span> does not return a value to the caller. The line ends with the opening curly brace of the method body.</span></div>
<div class="calibre23"><span>The body of <span class="bold1">range( )</span> consists solely of this line:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00235.jpg" class="calibre269"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>This statement displays the range of the vehicle by multiplying <span class="bold1">fuelcap</span> by <span class="bold1">mpg</span>. Since each object of type <span class="bold1">Vehicle</span> has its own copy of <span class="bold1">fuelcap</span> and <span class="bold1">mpg</span>, when <span class="bold1">range( )</span> is called, the range computation uses the calling object’s copies of those variables.</span></div>
<div class="calibre23"><span>The <span class="bold1">range( )</span> method ends when its closing curly brace is encountered. This causes program control to transfer back to the caller.</span></div>
<div class="calibre23"><span>Next, look closely at this line of code from inside <span class="bold1">main( )</span>:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00236.jpg" class="calibre270"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>This statement invokes the <span class="bold1">range( )</span> method on <span class="bold1">minivan</span>. That is, it calls <span class="bold1">range( )</span> relative to the <span class="bold1">minivan</span> object, using the object’s name followed by the dot operator. When a method is called, program control is transferred to the method. When the method terminates, control is transferred back to the caller, and execution resumes with the line of code following the call.</span></div>
<div class="calibre23"><span>In this case, the call to <span class="bold1">minivan.range( )</span> displays the range of the vehicle defined by <span class="bold1">minivan</span>. In similar fashion, the call to <span class="bold1">sportscar.range( )</span> displays the range of the vehicle defined by <span class="bold1">sportscar</span>. Each time <span class="bold1">range( )</span> is invoked, it displays the range for the specified object.</span></div>
<div class="calibre23"><span>There is something very important to notice inside the <span class="bold1">range( )</span> method: the instance variables <span class="bold1">fuelcap</span> and <span class="bold1">mpg</span> are referred to directly, without preceding them with an object name or the dot operator. When a method uses an instance variable that is defined by its class, it does so directly, without explicit reference to an object and without use of the dot operator. This is easy to understand if you think about it. A method is always invoked relative to some object of its class. Once this invocation has occurred, the object is known. Thus, within a method, there is no need to specify the object a second time. This means that <span class="bold1">fuelcap</span> and <span class="bold1">mpg</span> inside <span class="bold1">range( )</span> implicitly refer to the copies of those variables found in the object that invokes <span class="bold1">range( )</span>.</span></div>
<div id="filepos409714" class="calibre1"><span class="calibre10"><span><span class="bold1">Returning from a Method</span></span></span></div>
<div class="calibre12"><span>In general, there are two conditions that cause a method to return—first, as the <span class="bold1">range( )</span> method in the preceding example shows, when the method’s closing curly brace is encountered. The second is when a <span class="bold1">return</span> statement is executed. There are two forms of <span class="bold1">return</span>—one for use in <span class="bold1">void</span> methods (those that do not return a value) and one for returning values. The first form is examined here. The next section explains how to return values.</span></div>
<div class="calibre23"><span>In a <span class="bold1">void</span> method, you can cause the immediate termination of a method by using this form of <span class="bold1">return</span>:</span></div>
<div class="calibre27"><span>return ;</span></div>
<div class="calibre27"><span>When this statement executes, program control returns to the caller, skipping any remaining code in the method. For example, consider this method:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00237.jpg" class="calibre271"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>Here, the <span class="bold1">for</span> loop will only run from 0 to 5, because once <span class="bold1">i</span> equals 5, the method returns. It is permissible to have multiple <span class="bold1">return</span> statements in a method, especially when there are two or more routes out of it. For example:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00238.jpg" class="calibre272"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>Here, the method returns if it is done or if an error occurs. Be careful, however, because having too many exit points in a method can destructure your code; so avoid using them casually. A well-designed method has well-defined exit points.</span></div>
<div class="calibre23"><span>To review: A <span class="bold1">void</span> method can return in one of two ways—its closing curly brace is reached, or a <span class="bold1">return</span> statement is executed.</span></div>
<div id="filepos411954" class="calibre1"><span class="calibre10"><span><span class="bold1">Returning a Value</span></span></span></div>
<div class="calibre12"><span>Although methods with a return type of <span class="bold1">void</span> are not rare, most methods will return a value. In fact, the ability to return a value is one of the most useful features of a method. You have already seen one example of a return value: when we used the <span class="bold1">sqrt( )</span> function to obtain a square root.</span></div>
<div class="calibre23"><span>Return values are used for a variety of purposes in programming. In some cases, such as with <span class="bold1">sqrt( )</span>, the return value contains the outcome of some calculation. In other cases, the return value may simply indicate success or failure. In still others, it may contain a status code. Whatever the purpose, using method return values is an integral part of Java programming.</span></div>
<div class="calibre23"><span>Methods return a value to the calling routine using this form of <span class="bold1">return</span>:</span></div>
<div class="calibre27"><span>return <span class="italic">value</span>;</span></div>
<div class="calibre27"><span>Here, <span class="italic">value</span> is the value returned. This form of <span class="bold1">return</span> can be used only with methods that have a non-<span class="bold1">void</span> return type. Furthermore, a non-<span class="bold1">void</span> method <span class="italic">must</span> return a value by using this form of <span class="bold1">return</span>.</span></div>
<div class="calibre23"><span>You can use a return value to improve the implementation of <span class="bold1">range( )</span>. Instead of displaying the range, a better approach is to have <span class="bold1">range( )</span> compute the range and return this value. Among the advantages to this approach is that you can use the value for other calculations. The following example modifies <span class="bold1">range( )</span> to return the range rather than displaying it.</span></div>
<div class="calibre1"><span><img alt="image" src="images/00239.jpg" class="calibre273"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The output is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00240.jpg" class="calibre274"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>In the program, notice that when <span class="bold1">range( )</span> is called, it is put on the right side of an assignment statement. On the left is a variable that will receive the value returned by <span class="bold1">range( )</span>. Thus, after</span></div>
<div class="calibre1"><span><img alt="image" src="images/00241.jpg" class="calibre275"/></span></div><div class="calibre11"> </div>
<div class="calibre27"><span>executes, the range of the <span class="bold1">minivan</span> object is stored in <span class="bold1">range1</span>.</span></div>
<div class="calibre23"><span>Notice that <span class="bold1">range( )</span> now has a return type of <span class="bold1">int</span>. This means that it will return an integer value to the caller. The return type of a method is important because the type of data returned by a method must be compatible with the return type specified by the method. Thus, if you want a method to return data of type <span class="bold1">double</span>, its return type must be type <span class="bold1">double</span>.</span></div>
<div class="calibre23"><span>Although the preceding program is correct, it is not written as efficiently as it could be. Specifically, there is no need for the <span class="bold1">range1</span> or <span class="bold1">range2</span> variables. A call to <span class="bold1">range( )</span> can be used in the <span class="bold1">println( )</span> statement directly, as shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00242.jpg" class="calibre276"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>In this case, when <span class="bold1">println( )</span> is executed, <span class="bold1">minivan.range( )</span> is called automatically and its value will be passed to <span class="bold1">println( )</span>. Furthermore, you can use a call to <span class="bold1">range( )</span> whenever the range of a <span class="bold1">Vehicle</span> object is needed. For example, this statement compares the ranges of two vehicles:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00243.jpg" class="calibre252"/></span></div><div class="calibre11"> </div>
<div id="filepos416266" class="calibre1"><span class="calibre10"><span><span class="bold1">Using Parameters</span></span></span></div>
<div class="calibre12"><span>It is possible to pass one or more values to a method when the method is called. Recall that a value passed to a method is called an <span class="italic">argument</span>. Inside the method, the variable that receives the argument is called a <span class="italic">parameter</span>. Parameters are declared inside the parentheses that follow the method’s name. The parameter declaration syntax is the same as that used for variables. A parameter is within the scope of its method, and aside from its special task of receiving an argument, it acts like any other local variable.</span></div>
<div class="calibre23"><span>Here is a simple example that uses a parameter. Inside the <span class="bold1">ChkNum</span> class, the method <span class="bold1">isEven( )</span> returns <span class="bold1">true</span> if the value that it is passed is even. It returns <span class="bold1">false</span> otherwise. Therefore, <span class="bold1">isEven( )</span> has a return type of <span class="bold1">boolean</span>.</span></div>
<div class="calibre1"><span><img alt="image" src="images/00244.jpg" class="calibre277"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>Here is the output produced by the program:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00245.jpg" class="calibre278"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>In the program, <span class="bold1">isEven( )</span> is called three times, and each time a different value is passed. Let’s look at this process closely. First, notice how <span class="bold1">isEven( )</span> is called. The argument is specified between the parentheses. When <span class="bold1">isEven( )</span> is called the first time, it is passed the value 10. Thus, when <span class="bold1">isEven( )</span> begins executing, the parameter <span class="bold1">x</span> receives the value 10. In the second call, 9 is the argument, and <span class="bold1">x</span>, then, has the value 9. In the third call, the argument is 8, which is the value that <span class="bold1">x</span> receives. The point is that the value passed as an argument when <span class="bold1">isEven( )</span> is called is the value received by its parameter, <span class="bold1">x</span>.</span></div>
<div class="calibre23"><span>A method can have more than one parameter. Simply declare each parameter, separating one from the next with a comma. For example, the <span class="bold1">Factor</span> class defines a method called <span class="bold1">isFactor( )</span> that determines whether the first parameter is a factor of the second.</span></div>
<div class="calibre1"><span><img alt="image" src="images/00246.jpg" class="calibre161"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>Notice that when <span class="bold1">isFactor( )</span> is called, the arguments are also separated by commas.</span></div>
<div class="calibre23"><span>When using multiple parameters, each parameter specifies its own type, which can differ from the others. For example, this is perfectly valid:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00247.jpg" class="calibre171"/></span></div><div class="calibre11"> </div>
<div id="filepos419461" class="calibre1"><span class="calibre10"><span><span class="bold1">Adding a Parameterized Method to Vehicle</span></span></span></div>
<div class="calibre12"><span>You can use a parameterized method to add a new feature to the <span class="bold1">Vehicle</span> class: the ability to compute the amount of fuel needed for a given distance. This new method is called <span class="bold1">fuelneeded( )</span>. This method takes the number of miles that you want to drive and returns the number of gallons of gas required. The <span class="bold1">fuelneeded( )</span> method is defined like this:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00248.jpg" class="calibre279"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>Notice that this method returns a value of type <span class="bold1">double</span>. This is useful since the amount of fuel needed for a given distance might not be a whole number. The entire <span class="bold1">Vehicle</span> class that includes <span class="bold1">fuelneeded( )</span> is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00249.jpg" class="calibre280"/></span></div><div class="calibre11"> </div>
<div class="calibre1"><span><img alt="image" src="images/00250.jpg" class="calibre281"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The output from the program is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00251.jpg" class="calibre282"/></span></div><div class="calibre11"> </div>
<div class="calibre11"> </div><table cellspacing="0" cellpadding="0" class="calibre37">
<colgroup class="calibre38">
<col class="calibre72"/>
<col class="calibre73"/>
</colgroup>
<tr class="calibre41">
<td valign="top" id="filepos421161" class="calibre74"><span class="calibre10"><span class="bold1">Try This 4-1</span> </span></td>
<td valign="top" class="calibre75"><span class="calibre10">Creating a Help Class</span></td>
</tr></table><div class="calibre43"> </div>
<div class="calibre1"><span><img alt="image" src="images/00252.jpg" class="calibre283"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>If one were to try to summarize the essence of the class in one sentence, it might be this: a class encapsulates functionality. Of course, sometimes the trick is knowing where one “functionality” ends and another begins. As a general rule, you will want your classes to be the building blocks of your larger application. In order to do this, each class must represent a single functional unit that performs clearly delineated actions. Thus, you will want your classes to be as small as possible—but no smaller! That is, classes that contain extraneous functionality confuse and destructure code, but classes that contain too little functionality are fragmented. What is the balance? It is at this point that the science of programming becomes the <span class="italic">art</span> of programming. Fortunately, most programmers find that this balancing act becomes easier with experience.</span></div>
<div class="calibre23"><span>To begin to gain that experience you will convert the help system from <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_010.html#filepos374608">Try This 3-3</a> in the preceding chapter into a Help class. Let’s examine why this is a good idea. First, the help system defines one logical unit. It simply displays the syntax for Java’s control statements. Thus, its functionality is compact and well defined. Second, putting help in a class is an esthetically pleasing approach. Whenever you want to offer the help system to a user, simply instantiate a help-system object. Finally, because help is encapsulated, it can be upgraded or changed without causing unwanted side effects in the programs that use it.</span></div>
<div class="calibre19"><span>  <span class="bold1">1.</span>  Create a new file called <span class="bold1">HelpClassDemo.java.</span> To save you some typing, you might want to copy the file from <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_010.html#filepos374608">Try This 3-3</a>, <span class="bold1">Help3.java</span>, into <span class="bold1">HelpClassDemo.java</span>.</span></div>
<div class="calibre47"><span>  <span class="bold1">2.</span>  To convert the help system into a class, you must first determine precisely what constitutes the help system. For example, in <span class="bold1">Help3.java</span>, there is code to display a menu, input the user’s choice, check for a valid response, and display information about the item selected. The program also loops until the letter q is pressed. If you think about it, it is clear that the menu, the check for a valid response, and the display of the information are integral to the help system. How user input is obtained, and whether repeated requests should be processed, are not. Thus, you will create a class that displays the help information, the help menu, and checks for a valid selection. Its methods will be called <span class="bold1">helpOn( )</span>, <span class="bold1">showMenu( )</span>, and <span class="bold1">isValid( )</span>, respectively.</span></div>
<div class="calibre47"><span>  <span class="bold1">3.</span>  Create the <span class="bold1">helpOn( )</span> method as shown here:</span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00253.jpg" class="calibre284"/></span></div>
<div class="calibre47"><span>  <span class="bold1">4.</span>  Next, create the <span class="bold1">showMenu( )</span> method:</span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00254.jpg" class="calibre285"/></span></div>
<div class="calibre47"><span>  <span class="bold1">5.</span>  Create the <span class="bold1">isValid( )</span> method, shown here:</span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00255.jpg" class="calibre286"/></span></div>
<div class="calibre47"><span>  <span class="bold1">6.</span>  Assemble the foregoing methods into the <span class="bold1">Help</span> class, shown here:</span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00256.jpg" class="calibre287"/></span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00257.jpg" class="calibre288"/></span></div>
<div class="calibre47"><span>  <span class="bold1">7.</span>  Finally, rewrite the <span class="bold1">main( )</span> method from <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_010.html#filepos374608">Try This 3-3</a> so that it uses the new <span class="bold1">Help</span> class. Call this class <span class="bold1">HelpClassDemo.java</span>. The entire listing for <span class="bold1">HelpClassDemo.java</span> is shown here:</span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00258.jpg" class="calibre289"/></span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00259.jpg" class="calibre290"/></span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00260.jpg" class="calibre291"/></span></div>
<div class="calibre47"><span>            When you try the program, you will find that it is functionally the same as before. The advantage to this approach is that you now have a help system component that can be reused whenever it is needed.</span></div>
<div class="calibre36"><span><img alt="image" src="images/00005.jpg" class="calibre34"/></span></div><div class="calibre18"> </div>
<div id="filepos427794" class="calibre9"><span class="calibre10"><span><span class="bold1">Constructors</span></span></span></div>
<div class="calibre12"><span>In the preceding examples, the instance variables of each <span class="bold1">Vehicle</span> object had to be set manually using a sequence of statements, such as:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00261.jpg" class="calibre292"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>An approach like this would never be used in professionally written Java code. Aside from being error prone (you might forget to set one of the fields), there is simply a better way to accomplish this task: the constructor.</span></div>
<div class="calibre23"><span>A <span class="italic">constructor</span> initializes an object when it is created. It has the same name as its class and is syntactically similar to a method. However, constructors have no explicit return type. Typically, you will use a constructor to give initial values to the instance variables defined by the class, or to perform any other startup procedures required to create a fully formed object.</span></div>
<div class="calibre23"><span>All classes have constructors, whether you define one or not, because Java automatically provides a default constructor that initializes all member variables to their default values, which are zero, <span class="bold1">null</span>, and <span class="bold1">false</span>, for numeric types, reference types, and <span class="bold1">boolean</span>s, respectively. However, once you define your own constructor, the default constructor is no longer used.</span></div>
<div class="calibre23"><span>Here is a simple example that uses a constructor:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00262.jpg" class="calibre293"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>In this example, the constructor for <span class="bold1">MyClass</span> is</span></div>
<div class="calibre1"><span><img alt="image" src="images/00263.jpg" class="calibre294"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>This constructor assigns the instance variable <span class="bold1">x</span> of <span class="bold1">MyClass</span> the value 10. This constructor is called by <span class="bold1">new</span> when an object is created. For example, in the line</span></div>
<div class="calibre1"><span><img alt="image" src="images/00264.jpg" class="calibre295"/></span></div><div class="calibre11"> </div>
<div class="calibre27"><span>the constructor <span class="bold1">MyClass( )</span> is called on the <span class="bold1">t1</span> object, giving <span class="bold1">t1.x</span> the value 10. The same is true for <span class="bold1">t2</span>. After construction, <span class="bold1">t2.x</span> has the value 10. Thus, the output from the program is</span></div>
<div class="calibre1"><span><img alt="image" src="images/00265.jpg" class="calibre296"/></span></div><div class="calibre11"> </div>
<div id="filepos430767" class="calibre1"><span class="calibre10"><span><span class="bold1">Parameterized Constructors</span></span></span></div>
<div class="calibre12"><span>In the preceding example, a parameter-less constructor was used. Although this is fine for some situations, most often you will need a constructor that accepts one or more parameters. Parameters are added to a constructor in the same way that they are added to a method: just declare them inside the parentheses after the constructor’s name. For example, here, <span class="bold1">MyClass</span> is given a parameterized constructor:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00266.jpg" class="calibre297"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>The output from this program is shown here:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00267.jpg" class="calibre296"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>In this version of the program, the <span class="bold1">MyClass( )</span> constructor defines one parameter called <span class="bold1">i</span>, which is used to initialize the instance variable, <span class="bold1">x</span>. Thus, when the line</span></div>
<div class="calibre1"><span><img alt="image" src="images/00268.jpg" class="calibre298"/></span></div><div class="calibre11"> </div>
<div class="calibre27"><span>executes, the value 10 is passed to <span class="bold1">i</span>, which is then assigned to <span class="bold1">x</span>.</span></div>
<div id="filepos432300" class="calibre1"><span class="calibre10"><span><span class="bold1">Adding a Constructor to the Vehicle Class</span></span></span></div>
<div class="calibre12"><span>We can improve the <span class="bold1">Vehicle</span> class by adding a constructor that automatically initializes the <span class="bold1">passengers</span>, <span class="bold1">fuelcap</span>, and <span class="bold1">mpg</span> fields when an object is constructed. Pay special attention to how <span class="bold1">Vehicle</span> objects are created.</span></div>
<div class="calibre1"><span><img alt="image" src="images/00269.jpg" class="calibre299"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>Both <span class="bold1">minivan</span> and <span class="bold1">sportscar</span> are initialized by the <span class="bold1">Vehicle( )</span> constructor when they are created. Each object is initialized as specified in the parameters to its constructor. For example, in the following line,</span></div>
<div class="calibre1"><span><img alt="image" src="images/00270.jpg" class="calibre300"/></span></div><div class="calibre11"> </div>
<div class="calibre27"><span>the values 7, 16, and 21 are passed to the <span class="bold1">Vehicle( )</span> constructor when <span class="bold1">new</span> creates the object. Thus, <span class="bold1">minivan</span>’s copy of <span class="bold1">passengers</span>, <span class="bold1">fuelcap</span>, and <span class="bold1">mpg</span> will contain the values 7, 16, and 21, respectively. The output from this program is the same as the previous version.</span></div>
<div id="filepos433708" class="calibre1"><span class="calibre10"><span><span class="bold1">The new Operator Revisited</span></span></span></div>
<div class="calibre12"><span>Now that you know more about classes and their constructors, let’s take a closer look at the <span class="bold1">new</span> operator. In the context of an assignment, the <span class="bold1">new</span> operator has this general form:</span></div>
<div class="calibre27"><span><span class="italic">class-var</span> = new <span class="italic">class-name(arg-list);</span></span></div>
<div class="calibre27"><span>Here, <span class="italic">class-var</span> is a variable of the class type being created. The <span class="italic">class-name</span> is the name of the class that is being instantiated. The class name followed by a parenthesized argument list (which can be empty) specifies the constructor for the class. If a class does not define its own constructor, <span class="bold1">new</span> will use the default constructor supplied by Java. Thus, <span class="bold1">new</span> can be used to create an object of any class type. The <span class="bold1">new</span> operator returns a reference to the newly created object, which (in this case) is assigned to <span class="italic">class-var</span>.</span></div>
<div class="calibre23"><span>Since memory is finite, it is possible that <span class="bold1">new</span> will not be able to allocate memory for an object because insufficient memory exists. If this happens, a run-time exception will occur. (You will learn about exceptions in <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_016.html#filepos764315">Chapter 9</a>.) For the sample programs in this book, you won’t need to worry about running out of memory, but you will need to consider this possibility in real-world programs that you write.</span></div>
<div id="filepos435366" class="calibre1"><span class="calibre10"><span><span class="bold1">Garbage Collection</span></span></span></div>
<div class="calibre12"><span>As you have seen, objects are dynamically allocated from a pool of free memory by using the <span class="bold1">new</span> operator. As explained, memory is not infinite, and the free memory can be exhausted. Thus, it is possible for <span class="bold1">new</span> to fail because there is insufficient free memory to create the desired object. For this reason, a key component of any dynamic allocation scheme is the recovery of free memory from unused objects, making that memory available for subsequent reallocation. In some programming languages, the release of previously allocated memory is handled manually. However, Java uses a different, more trouble-free approach: <span class="italic">garbage collection</span>.</span></div>
<div class="calibre23"><span>Java’s garbage collection system reclaims objects automatically—occurring transparently, behind the scenes, without any programmer intervention. It works like this: When no references to an object exist, that object is assumed to be no longer needed, and the memory occupied by the object is released. This recycled memory can then be used for a subsequent allocation.</span></div>
<div class="calibre35"><span><img alt="image" src="images/00005.jpg" class="calibre34"/></span></div>
<div class="calibre9"><span class="calibre10"><span><span class="bold1">Ask the Expert</span></span></span></div>
<div class="calibre19"><span><span class="bold1"><span><span class="calibre10">Q</span></span>:   Why don’t I need to use</span> new <span class="bold1">for variables of the primitive types, such as</span> int <span class="bold1">or</span> float?</span></div>
<div class="calibre19"><span><span class="bold1"><span><span class="calibre10">A</span></span>:</span>   Java’s primitive types are not implemented as objects. Rather, because of efficiency concerns, they are implemented as “normal” variables. A variable of a primitive type actually contains the value that you have given it. As explained, object variables are references to the object. This layer of indirection (and other object features) adds overhead to an object that is avoided by a primitive type.</span></div>
<div class="calibre36"><span><img alt="image" src="images/00005.jpg" class="calibre34"/></span></div><div class="calibre18"> </div>
<div class="calibre23"><span>Garbage collection occurs only sporadically during the execution of your program. It will not occur simply because one or more objects exist that are no longer used. For efficiency, the garbage collector will usually run only when two conditions are met: there are objects to recycle, and there is a need to recycle them. Remember, garbage collection takes time, so the Java run-time system does it only when it is appropriate. Thus, you can’t know precisely when garbage collection will take place.</span></div>
<div id="filepos438458" class="calibre1"><span class="calibre10"><span><span class="bold1">The finalize( ) Method</span></span></span></div>
<div class="calibre12"><span>It is possible to define a method that will be called just before an object’s final destruction by the garbage collector. This method is called <span class="bold1">finalize( )</span>, and it can be used to ensure that an object terminates cleanly. For example, you might use <span class="bold1">finalize( )</span> to make sure that an open file owned by that object is closed.</span></div>
<div class="calibre23"><span>To add a finalizer to a class, you simply define the <span class="bold1">finalize( )</span> method. The Java run-time system calls that method whenever it is about to recycle an object of that class. Inside the <span class="bold1">finalize( )</span> method, you will specify those actions that must be performed before an object is destroyed.</span></div>
<div class="calibre23"><span>The <span class="bold1">finalize( )</span> method has this general form:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00271.jpg" class="calibre301"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>Here, the keyword <span class="bold1">protected</span> is a specifier that limits access to <span class="bold1">finalize( )</span>. This and the other access specifiers are explained in <a href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_013.html#filepos547570">Chapter 6</a>.</span></div>
<div class="calibre23"><span>It is important to understand that <span class="bold1">finalize( )</span> is called just before garbage collection. It is not called when an object goes out of scope, for example. This means that you cannot know when—or even if—<span class="bold1">finalize( )</span> will be executed. For example, if your program ends before garbage collection occurs, <span class="bold1">finalize( )</span> will not execute. Therefore, it should be used as a “backup” procedure to ensure the proper handling of some resource, or for special-use applications, not as the means that your program uses in its normal operation. In short, <span class="bold1">finalize( )</span> is a specialized method that is seldom needed by most programs.</span></div>
<div class="calibre35"><span><img alt="image" src="images/00005.jpg" class="calibre34"/></span></div>
<div class="calibre9"><span class="calibre10"><span><span class="bold1">Ask the Expert</span></span></span></div>
<div class="calibre19"><span><span class="bold1"><span><span class="calibre10">Q</span></span>:   I know that C++ defines things called <span class="italic">destructors</span>, which are automatically executed when an object is destroyed. Is</span> finalize( ) <span class="bold1">similar to a destructor?</span></span></div>
<div class="calibre19"><span><span class="bold1"><span><span class="calibre10">A</span></span>:</span>   Java does not have destructors. Although it is true that the <span class="bold1">finalize( )</span> method approximates the function of a destructor, it is not the same. For example, a C++ destructor is always called just before an object goes out of scope, but you can’t know when <span class="bold1">finalize( )</span> will be called for any specific object. Frankly, because of Java’s use of garbage collection, there is little need for a destructor.</span></div>
<div class="calibre36"><span><img alt="image" src="images/00005.jpg" class="calibre34"/></span></div><div class="calibre18"> </div>
<div class="calibre11"> </div><table cellspacing="0" cellpadding="0" class="calibre37">
<colgroup class="calibre38">
<col class="calibre72"/>
<col class="calibre73"/>
</colgroup>
<tr class="calibre41">
<td valign="top" id="filepos442054" class="calibre74"><span class="calibre10"><span class="bold1">Try This 4-2</span> </span></td>
<td valign="top" class="calibre75"><span class="calibre10">Demonstrate Garbage Collection and Finalization</span></td>
</tr></table><div class="calibre43"> </div>
<div class="calibre1"><span><img alt="image" src="images/00272.jpg" class="calibre302"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>Because garbage collection runs sporadically in the background, it is not trivial to demonstrate it. However, one way it can be done is through the use of the <span class="bold1">finalize( )</span> method. Recall that <span class="bold1">finalize( )</span> is called when an object is about to be recycled. As explained, objects are not necessarily recycled as soon as they are no longer needed. Instead, the garbage collector waits until it can perform its collection efficiently, usually when there are many unused objects. Thus, to demonstrate garbage collection via the <span class="bold1">finalize( )</span> method, you often need to create and destroy a large number of objects—and this is precisely what you will do in this project.</span></div>
<div class="calibre19"><span>  <span class="bold1">1.</span>  Create a new file called <span class="bold1">Finalize.java.</span></span></div>
<div class="calibre47"><span>  <span class="bold1">2.</span>  Create the <span class="bold1">FDemo</span> class shown here:</span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00273.jpg" class="calibre303"/></span></div>
<div class="calibre47"><span>        The constructor sets the instance variable <span class="bold1">x</span> to a known value. In this example, <span class="bold1">x</span> is used as an object ID. The <span class="bold1">finalize( )</span> method displays the value of <span class="bold1">x</span> when an object is recycled. Of special interest is <span class="bold1">generator( )</span>. This method creates and then promptly discards an <span class="bold1">FDemo</span> object. You will see how this is used in the next step.</span></div>
<div class="calibre47"><span>  <span class="bold1">3.</span>  Create the <span class="bold1">Finalize</span> class, shown here:</span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00274.jpg" class="calibre304"/></span></div>
<div class="calibre47"><span>        This class creates an initial <span class="bold1">FDemo</span> object called <span class="bold1">ob</span>. Then, using <span class="bold1">ob</span>, it creates 100,000 objects by calling <span class="bold1">generator( )</span> on <span class="bold1">ob</span>. This has the net effect of creating and discarding 100,000 objects. At various points in the middle of this process, garbage collection will take place. Precisely how often or when depends upon several factors, such as the initial amount of free memory and the operating system. However, at some point, you will start to see the messages generated by <span class="bold1">finalize( )</span>. If you don’t see the messages, try increasing the number of objects being generated by raising the count in the <span class="bold1">for</span> loop.</span></div>
<div class="calibre47"><span>  <span class="bold1">4.</span>  Here is the entire <span class="bold1">Finalize.java</span> program:</span></div>
<div class="calibre47"><span>        <img alt="image" src="images/00275.jpg" class="calibre305"/></span></div>
<div class="calibre36"><span><img alt="image" src="images/00005.jpg" class="calibre34"/></span></div><div class="calibre18"> </div>
<div id="filepos446030" class="calibre9"><span class="calibre10"><span><span class="bold1">The this Keyword</span></span></span></div>
<div class="calibre12"><span>Before concluding this chapter, it is necessary to introduce <span class="bold1">this</span>. When a method is called, it is automatically passed an implicit argument that is a reference to the invoking object (that is, the object on which the method is called). This reference is called <span class="bold1">this</span>. To understand <span class="bold1">this</span>, first consider a program that creates a class called <span class="bold1">Pwr</span> that computes the result of a number raised to some integer power:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00276.jpg" class="calibre306"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>As you know, within a method, the other members of a class can be accessed directly, without any object or class qualification. Thus, inside <span class="bold1">get_pwr( )</span>, the statement</span></div>
<div class="calibre1"><span><img alt="image" src="images/00277.jpg" class="calibre307"/></span></div><div class="calibre11"> </div>
<div class="calibre27"><span>means that the copy of <span class="bold1">val</span> associated with the invoking object will be returned. However, the same statement can also be written like this:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00278.jpg" class="calibre308"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>Here, <span class="bold1">this</span> refers to the object on which <span class="bold1">get_pwr( )</span> was called. Thus, <span class="bold1">this.val</span> refers to that object’s copy of <span class="bold1">val</span>. For example, if <span class="bold1">get_pwr( )</span> had been invoked on <span class="bold1">x</span>, then <span class="bold1">this</span> in the preceding statement would have been referring to <span class="bold1">x</span>. Writing the statement without using <span class="bold1">this</span> is really just shorthand.</span></div>
<div class="calibre23"><span>Here is the entire <span class="bold1">Pwr</span> class written using the <span class="bold1">this</span> reference:</span></div>
<div class="calibre1"><span><img alt="image" src="images/00279.jpg" class="calibre309"/></span></div><div class="calibre11"> </div>
<div class="calibre23"><span>Actually, no Java programmer would write <span class="bold1">Pwr</span> as just shown because nothing is gained, and the standard form is easier. However, <span class="bold1">this</span> has some important uses. For example, the Java syntax permits the name of a parameter or a local variable to be the same as the name of an instance variable. When this happens, the local name <span class="italic">hides</span> the instance variable. You can gain access to the hidden instance variable by referring to it through <span class="bold1">this</span>. For example, the following is a syntactically valid way to write the <span class="bold1">Pwr( )</span> constructor.</span></div>
<div class="calibre1"><span><img alt="image" src="images/00280.jpg" class="calibre310"/></span></div><div class="calibre11"> </div>
<div class="calibre12"><span>In this version, the names of the parameters are the same as the names of the instance variables, thus hiding them. However, <span class="bold1">this</span> is used to “uncover” the instance variables.</span></div>
<div id="filepos449254" class="calibre44"><span class="calibre10"><span><img alt="image" src="images/00059.jpg" class="calibre104"/>   <span class="bold1"><span class="italic">Chapter 4 Self Test</span></span></span></span></div><div class="calibre11"> </div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos449534" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1504425">1</a>.</span>  What is the difference between a class and an object?</span></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos449755" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1504873">2</a>.</span>  How is a class defined?</span></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos449946" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1505304">3</a>.</span>  What does each object have its own copy of?</span></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos450157" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1505692">4</a>.</span>  Using two separate statements, show how to declare an object called <span class="bold1">counter</span> of a class called <span class="bold1">MyCounter</span>.</span></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos450443" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1506134">5</a>.</span>  Show how a method called <span class="bold1">myMeth( )</span> is declared if it has a return type of <span class="bold1">double</span> and has two <span class="bold1">int</span> parameters called <span class="bold1">a</span> and <span class="bold1">b</span>.</span></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos450769" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1506616">6</a>.</span>  How must a method return if it returns a value?</span></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos450984" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1507048">7</a>.</span>  What name does a constructor have?</span></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos451186" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1507392">8</a>.</span>  What does <span class="bold1">new</span> do?</span></div>
<div class="calibre47"><span>  <span class="bold1"><a id="filepos451378" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1507793">9</a>.</span>  What is garbage collection, and how does it work? What is <span class="bold1">finalize( )</span>?</span></div>
<div class="calibre47"><span><span class="bold1"><a id="filepos451607" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1508313">10</a>.</span>  What is <span class="bold1">this</span>?</span></div>
<div class="calibre47"><span><span class="bold1"><a id="filepos451781" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1508706">11</a>.</span>  Can a constructor have one or more parameters?</span></div>
<div class="calibre47"><span><span class="bold1"><a id="filepos451981" href="CR%21CDS4MRPTP172DC9AQDQQBWENKH9V_split_025.html#filepos1509007">12</a>.</span>  If a method returns no value, what must its return type be?</span></div>  <div class="mbppagebreak" id="calibre_pb_11"></div>
</body></html>
